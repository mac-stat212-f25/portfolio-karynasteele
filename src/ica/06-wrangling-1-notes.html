<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>6 Adv Data wrangling P1 – COMP/STAT212 Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../src/ica/07-wrangling-2-notes.html" rel="next">
<link href="../../src/ica/04-adv-maps-1-notes.html" rel="prev">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-b53751a350365c71b6c909e95f209ed1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-463f7e572b85bff0cfe833e89a202fa4.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-2b27489b1280a247593da265a4955406.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script><style>html{ scroll-behavior: smooth; }</style>
<link rel="stylesheet" href="../../style/custom.css">
</head>
<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../src/ica/ica-sample1.html">In-Class Activities</a></li><li class="breadcrumb-item"><a href="../../src/ica/06-wrangling-1-notes.html"><span class="chapter-title">6 Adv Data wrangling P1</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../assets/sidebar-logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"></a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Your Name Here</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Prof Viz</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/pv/pv-01.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Professional Viz Sample</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">TidyTuesday</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/tt/hw01-tt.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">TidyTuesday Sample 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/tt/hw02-tt.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Homework 02</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">In-Class Activities</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/ica-sample1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">ICA Sample 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/ica-sample2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">ICA Sample 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/03-adv-ggplot-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">3 Advanced Data Viz</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/04-adv-maps-1-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">4 Advanced Spatial Viz P1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/06-wrangling-1-notes.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">6 Adv Data wrangling P1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/07-wrangling-2-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">7 Adv Data wrangling P2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/08-missing-data-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">8 Missing Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/09-functions-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">9 Functions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/10-base-r-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">10 Base R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/ica/12-iteration-2-notes.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">12 Loops+Iter P2</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/appx/appx-sample1.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Appendix Sample 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/appx/appx-sample2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Appendix Sample 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../mm/mm.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Mind Maps</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="99"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#learning-goals" id="toc-learning-goals" class="nav-link active" data-scroll-target="#learning-goals">🧩 Learning Goals</a></li>
  <li><a href="#helpful-cheatsheets" id="toc-helpful-cheatsheets" class="nav-link" data-scroll-target="#helpful-cheatsheets">Helpful Cheatsheets</a></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors">Vectors</a></li>
  <li>
<a href="#logicals" id="toc-logicals" class="nav-link" data-scroll-target="#logicals">Logicals</a>
  <ul class="collapse">
<li><a href="#notes" id="toc-notes" class="nav-link" data-scroll-target="#notes">Notes</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  </ul>
</li>
  <li>
<a href="#numerics" id="toc-numerics" class="nav-link" data-scroll-target="#numerics">Numerics</a>
  <ul class="collapse">
<li><a href="#notes-1" id="toc-notes-1" class="nav-link" data-scroll-target="#notes-1">Notes</a></li>
  <li><a href="#exercises-1" id="toc-exercises-1" class="nav-link" data-scroll-target="#exercises-1">Exercises</a></li>
  </ul>
</li>
  <li>
<a href="#dates" id="toc-dates" class="nav-link" data-scroll-target="#dates">Dates</a>
  <ul class="collapse">
<li><a href="#notes-2" id="toc-notes-2" class="nav-link" data-scroll-target="#notes-2">Notes</a></li>
  <li><a href="#exercises-2" id="toc-exercises-2" class="nav-link" data-scroll-target="#exercises-2">Exercises</a></li>
  </ul>
</li>
  <li>
<a href="#factors" id="toc-factors" class="nav-link" data-scroll-target="#factors">Factors</a>
  <ul class="collapse">
<li><a href="#notes-3" id="toc-notes-3" class="nav-link" data-scroll-target="#notes-3">Notes</a></li>
  <li><a href="#exercises-3" id="toc-exercises-3" class="nav-link" data-scroll-target="#exercises-3">Exercises</a></li>
  </ul>
</li>
  <li><a href="#done" id="toc-done" class="nav-link" data-scroll-target="#done">Done!</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../src/ica/ica-sample1.html">In-Class Activities</a></li><li class="breadcrumb-item"><a href="../../src/ica/06-wrangling-1-notes.html"><span class="chapter-title">6 Adv Data wrangling P1</span></a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-title">6 Adv Data wrangling P1</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header><section id="learning-goals" class="level2"><h2 class="anchored" data-anchor-id="learning-goals">🧩 Learning Goals</h2>
<p>By the end of this lesson, you should be able to:</p>
<ul>
<li>Determine the class of a given object and identify concerns to be wary of when manipulating an object of that class (numerics, logicals, factors, dates, strings, data.frames)</li>
<li>Explain what vector recycling is, when it can be a problem, and how to avoid those problems</li>
<li>Use a variety of functions to wrangle numerical and logical data</li>
<li>Extract date-time information using the <code>lubridate</code> package</li>
<li>Use the <code>forcats</code> package to wrangle factor data</li>
</ul></section><section id="helpful-cheatsheets" class="level2"><h2 class="anchored" data-anchor-id="helpful-cheatsheets">Helpful Cheatsheets</h2>
<p>RStudio (Posit) maintains a collection of wonderful <a href="https://rstudio.github.io/cheatsheets/html/data-transformation.html">cheatsheets</a>. The following will be helpful:</p>
<ul>
<li><a href="https://rstudio.github.io/cheatsheets/html/data-transformation.html">Data transformation with <code>dplyr</code></a></li>
<li><a href="https://rstudio.github.io/cheatsheets/html/lubridate.html">Dates and times with <code>lubridate</code></a></li>
<li><a href="https://rstudio.github.io/cheatsheets/html/factors.html">Factors with <code>forcats</code></a></li>
</ul>
<p><strong>Data Wrangling Verbs (from Stat/Comp 112)</strong></p>
<ul>
<li>
<code>mutate()</code>: creates/changes columns/elements in a data frame/tibble</li>
<li>
<code>select()</code>: keeps subset of columns/elements in a data frame/tibble</li>
<li>
<code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>: keeps subsets of rows in a data frame/tibble</li>
<li>
<code>arrange()</code>: sorts rows in a data frame/tibble</li>
<li>
<code>group_by()</code>: internally groups rows in data frame/tibble by values in 1 or more columsn/elements</li>
<li>
<code>summarize()</code>: collapses/combines information across rows using functions such as <code>n()</code>, <code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>, <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>, <code><a href="https://rdrr.io/r/stats/median.html">median()</a></code>, <code><a href="https://rdrr.io/r/stats/sd.html">sd()</a></code>
</li>
<li>
<code>count()</code>: shortcut for <code>group_by() |&gt; summarize(n = n())</code>
</li>
<li>
<code>left_join()</code>: mutating join of two data frames/tibbles keeping all rows in left data frame</li>
<li>
<code>full_join()</code>: mutating join of two data frames/tibbles keeping all rows in both data frames</li>
<li>
<code>inner_join()</code>: mutating join of two data frames/tibbles keeping rows in left data frame that find match in right</li>
<li>
<code>semi_join()</code>: filtering join of two data frames/tibbles keeping rows in left data frame that find match in right</li>
<li>
<code>anti_join()</code>: filtering join of two data frames/tibbles keeping rows in left data frame that do not find match in right</li>
<li>
<code>pivot_wider()</code>: rearrange values from two columns to many(one column becomes the names of new variables, one column becomes the values of the new variables)</li>
<li>
<code>pivot_longer()</code>: rearrange values from many columns to two (the names of the columns go to one new variable, the values of the columns go to a second new variable)</li>
</ul></section><section id="vectors" class="level2"><h2 class="anchored" data-anchor-id="vectors">Vectors</h2>
<p>An <strong>atomic vector</strong> is a storage container in R where all elements in the container are of the same type. The types that are relevant to data science are:</p>
<ul>
<li>
<code>logical</code> (also known as boolean)</li>
<li>numbers
<ul>
<li><code>integer</code></li>
<li>
<code>numeric</code> floating point (also known as double)</li>
</ul>
</li>
<li>
<code>character</code> string</li>
<li>
<code>Date</code> and date-time (saved as <code>POSIXct</code>)</li>
<li><code>factor</code></li>
</ul>
<p>Function documentation will refer to vectors frequently.</p>
<p>See examples below:</p>
<ul>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">ggplot2::scale_x_continuous()</a></code>
<ul>
<li>
<code>breaks</code>: A <strong>numeric vector</strong> of positions</li>
<li>
<code>labels</code>: A <strong>character vector</strong> giving labels (must be same length as breaks)</li>
</ul>
</li>
<li>
<code><a href="https://rdrr.io/pkg/shiny/man/sliderInput.html">shiny::sliderInput()</a></code>
<ul>
<li>
<code>value</code>: The initial value of the slider […] A <strong>length one vector</strong> will create a regular slider; a <strong>length two vector</strong> will create a double-ended range slider.</li>
</ul>
</li>
</ul>
<p>When you need a vector, you can create one manually using</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/c.html">c()</a></code>: the combine function</li>
</ul>
<p>Or you can create one based on available data using</p>
<ul>
<li>
<code>dataset |&gt; mutate(newvar = variable &gt; 5) |&gt; pull(newvar)</code>: taking one column out of a dataset</li>
<li>
<code>dataset |&gt; pull(variable) |&gt; unique()</code>: taking one column out of a dataset and finding unique values</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">c</span>(<span class="st">"Fair"</span>, <span class="st">"Good"</span>, <span class="st">"Very Good"</span>, <span class="st">"Premium"</span>, <span class="st">"Ideal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "Fair"      "Good"      "Very Good" "Premium"   "Ideal"    </code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>diamonds <span class="sc">|&gt;</span> <span class="fu">pull</span>(cut) <span class="sc">|&gt;</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] Ideal     Premium   Good      Very Good Fair     
Levels: Fair &lt; Good &lt; Very Good &lt; Premium &lt; Ideal</code></pre>
</div>
</div>
</section><section id="logicals" class="level2"><h2 class="anchored" data-anchor-id="logicals">Logicals</h2>
<section id="notes" class="level3"><h3 class="anchored" data-anchor-id="notes">Notes</h3>
<p>What does a logical vector look like?</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>)</span>
<span id="cb5-2"><a href="#cb5-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE    NA</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">class</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<p>You will often create logical vectors with comparison operators: <code>&gt;</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">12</span>)</span>
<span id="cb9-2"><a href="#cb9-2"></a>x <span class="sc">&lt;</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE FALSE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>x <span class="sc">&lt;=</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>x <span class="sc">&gt;</span> <span class="dv">9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>x <span class="sc">&gt;=</span> <span class="dv">9</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE  TRUE  TRUE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>x <span class="sc">==</span> <span class="dv">12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>x <span class="sc">!=</span> <span class="dv">12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE  TRUE FALSE</code></pre>
</div>
</div>
<p>When you want to check for set containment, the <code>%in%</code> operator is the correct way to do this (as opposed to <code>==</code>).</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">4</span>)</span>
<span id="cb21-2"><a href="#cb21-2"></a>x <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stderr">
<pre><code>Warning in x == c(1, 2, 4): longer object length is not a multiple of shorter
object length</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<p>The <code>Warning: longer object length is not a multiple of shorter object length</code> is a manifestation of <strong>vector recycling</strong>.</p>
<p>In R, if two vectors are being combined or compared, the shorter one will be repeated to match the length of the longer one–even if longer object length isn’t a multiple of the shorter object length. We can see the exact recycling that happens below:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">4</span>)</span>
<span id="cb26-2"><a href="#cb26-2"></a>x <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>x <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>) <span class="co"># This line demonstrates the recycling that happens on the previous line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
</div>
</div>
<p>Logical vectors can also be created with functions. <code><a href="https://rdrr.io/r/base/NA.html">is.na()</a></code> is one useful example:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="cn">NA</span>)</span>
<span id="cb30-2"><a href="#cb30-2"></a>x <span class="sc">==</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] NA NA NA NA</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">is.na</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
</div>
</div>
<p>We can negate a logical object with <code>!</code>. We can combine logical objects with <code>&amp;</code> (and) and <code>|</code> (or).</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">9</span>)</span>
<span id="cb34-2"><a href="#cb34-2"></a>x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE  TRUE FALSE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="sc">!</span>(x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE  TRUE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>x <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">|</span> x <span class="sc">&gt;</span> <span class="dv">8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE  TRUE</code></pre>
</div>
</div>
<p>We can summarize logical vectors with:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/any.html">any()</a></code>: Are ANY of the values <code>TRUE</code>?</li>
<li>
<code><a href="https://rdrr.io/r/base/all.html">all()</a></code>: Are ALL of the values <code>TRUE</code>?</li>
<li>
<code><a href="https://rdrr.io/r/base/sum.html">sum()</a></code>: How many of the values are <code>TRUE</code>?</li>
<li>
<code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>: What fraction of the values are <code>TRUE</code>?</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">9</span>)</span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="fu">any</span>(x <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="fu">sum</span>(x <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">mean</span>(x <span class="sc">==</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 0.25</code></pre>
</div>
</div>
<p><code>if_else()</code> and <code>case_when()</code> are functions that allow you to return values depending on the value of a logical vector. You’ll explore the documentation for these in the following exercises.</p>
<div class="callout callout-style-simple callout-tip no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Note: <code><a href="https://rdrr.io/r/base/ifelse.html">ifelse()</a></code> (from base R) and <code>if_else()</code> (from tidyverse) are different functions. We prefer <code>if_else()</code> for many reasons (examples below).</p>
<ul>
<li>Noisy to make sure you catch issues/bugs</li>
<li>Can explicitly handle missing values</li>
<li>Keeps dates as dates</li>
</ul>
<details><summary>
Examples
</summary><div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="cn">NA</span>)</span>
<span id="cb48-2"><a href="#cb48-2"></a></span>
<span id="cb48-3"><a href="#cb48-3"></a><span class="fu">ifelse</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">'positive'</span>, <span class="st">'negative'</span>)</span>
<span id="cb48-4"><a href="#cb48-4"></a><span class="fu">if_else</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">'positive'</span>, <span class="st">'negative'</span>)</span>
<span id="cb48-5"><a href="#cb48-5"></a></span>
<span id="cb48-6"><a href="#cb48-6"></a></span>
<span id="cb48-7"><a href="#cb48-7"></a><span class="fu">ifelse</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="st">'negative'</span>) <span class="co"># Bad: doesn't complain with combo of data types</span></span>
<span id="cb48-8"><a href="#cb48-8"></a><span class="fu">if_else</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="dv">1</span>, <span class="st">'negative'</span>) <span class="co"># Good:noisy to make sure you catch issues</span></span>
<span id="cb48-9"><a href="#cb48-9"></a></span>
<span id="cb48-10"><a href="#cb48-10"></a><span class="fu">if_else</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">'positive'</span>, <span class="st">'negative'</span>, <span class="at">missing =</span> <span class="st">'missing'</span>) <span class="co"># Good: can explicitly handle NA</span></span>
<span id="cb48-11"><a href="#cb48-11"></a></span>
<span id="cb48-12"><a href="#cb48-12"></a>fun_dates <span class="ot">&lt;-</span> <span class="fu">mdy</span>(<span class="st">'1-1-2025'</span>) <span class="sc">+</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">365</span></span>
<span id="cb48-13"><a href="#cb48-13"></a><span class="fu">ifelse</span>(fun_dates <span class="sc">&lt;</span> <span class="fu">today</span>(), fun_dates <span class="sc">+</span> <span class="fu">years</span>(), fun_dates) <span class="co"># Bad: converts dates to integers</span></span>
<span id="cb48-14"><a href="#cb48-14"></a><span class="fu">if_else</span>(fun_dates <span class="sc">&lt;</span> <span class="fu">today</span>(), fun_dates <span class="sc">+</span> <span class="fu">years</span>(), fun_dates) <span class="co"># Good: keeps dates as dates</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</details>
</div>
</div>
</div>
</section><section id="exercises" class="level3"><h3 class="anchored" data-anchor-id="exercises">Exercises</h3>
<p>Load the diamonds dataset, and filter to the first 1000 diamonds.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="fu">data</span>(diamonds)</span>
<span id="cb49-2"><a href="#cb49-2"></a>diamonds <span class="ot">&lt;-</span> diamonds <span class="sc">|&gt;</span> </span>
<span id="cb49-3"><a href="#cb49-3"></a>    <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1000</span>) <span class="co"># fist 1000 rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Using <code>tidyverse</code> functions, complete the following:</p>
<ol type="1">
<li>Subset to diamonds that are less than 400 dollars or more than 10000 dollars.</li>
<li>Subset to diamonds that are between 500 and 600 dollars (inclusive).</li>
<li>How many diamonds are of either Fair, Premium, or Ideal cut (a total count)? What fraction of diamonds are of Fair, Premium, or Ideal cut?
<ul>
<li>First, do this a wrong way with <code>==</code>. Predict the warning message that you will receive.</li>
<li>Second, do this the correct way with an appropriate logical operator.</li>
</ul>
</li>
<li>Are there any diamonds of Fair cut that are more than $3000? Are all diamonds of Ideal cut more than $2000?</li>
<li>Create two new categorized versions of <code>price</code> by looking up the documentation for <code>if_else()</code> and <code>case_when()</code>:
<ul>
<li>
<code>price_cat1</code>: “low” if price is less than 500 and “high” otherwise</li>
<li>
<code>price_cat2</code>: “low” if price is less than 500, “medium” if price is between 500 and 1000 dollars inclusive, and “high” otherwise.</li>
</ul>
</li>
</ol>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="co">#1</span></span>
<span id="cb50-2"><a href="#cb50-2"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="#cb50-3"></a>  <span class="fu">filter</span>(price <span class="sc">&lt;</span> <span class="dv">400</span> <span class="sc">|</span> price <span class="sc">&gt;</span> <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 10
   carat cut       color clarity depth table price     x     y     z
   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
 2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
 3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
 4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
 5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
 6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
 7  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
 8  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
 9  0.22 Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
10  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39
# ℹ 20 more rows</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="co">#2</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="fu">filter</span>(price <span class="sc">&lt;=</span> <span class="dv">600</span> <span class="sc">&amp;</span> price <span class="sc">&gt;=</span> <span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 90 × 10
   carat cut       color clarity depth table price     x     y     z
   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  0.35 Ideal     I     VS1      60.9  57     552  4.54  4.59  2.78
 2  0.3  Premium   D     SI1      62.6  59     552  4.23  4.27  2.66
 3  0.3  Ideal     D     SI1      62.5  57     552  4.29  4.32  2.69
 4  0.3  Ideal     D     SI1      62.1  56     552  4.3   4.33  2.68
 5  0.42 Premium   I     SI2      61.5  59     552  4.78  4.84  2.96
 6  0.28 Ideal     G     VVS2     61.4  56     553  4.19  4.22  2.58
 7  0.32 Ideal     I     VVS1     62    55.3   553  4.39  4.42  2.73
 8  0.31 Very Good G     SI1      63.3  57     553  4.33  4.3   2.73
 9  0.31 Premium   G     SI1      61.8  58     553  4.35  4.32  2.68
10  0.24 Premium   E     VVS1     60.7  58     553  4.01  4.03  2.44
# ℹ 80 more rows</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a><span class="co">#3</span></span>
<span id="cb54-2"><a href="#cb54-2"></a><span class="co"># diamonds |&gt;</span></span>
<span id="cb54-3"><a href="#cb54-3"></a>  <span class="co"># sum(cut == c("Fair", "Premium", "Ideal")) # Incorrect</span></span>
<span id="cb54-4"><a href="#cb54-4"></a></span>
<span id="cb54-5"><a href="#cb54-5"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb54-6"><a href="#cb54-6"></a>  <span class="fu">mutate</span>(<span class="at">cut1 =</span> cut <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Fair"</span>, <span class="st">"Premium"</span>, <span class="st">"Ideal"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb54-7"><a href="#cb54-7"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(cut1), <span class="fu">mean</span>(cut1)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  `sum(cut1)` `mean(cut1)`
        &lt;int&gt;        &lt;dbl&gt;
1         685        0.685</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a><span class="co">#4</span></span>
<span id="cb56-2"><a href="#cb56-2"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>  <span class="fu">filter</span>(cut <span class="sc">==</span> <span class="st">"Fair"</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4"></a>  <span class="fu">summarize</span>(<span class="fu">any</span>(price <span class="sc">&gt;</span> <span class="dv">3000</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  `any(price &gt; 3000)`
  &lt;lgl&gt;              
1 FALSE              </code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="co">#5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="numerics" class="level2"><h2 class="anchored" data-anchor-id="numerics">Numerics</h2>
<section id="notes-1" class="level3"><h3 class="anchored" data-anchor-id="notes-1">Notes</h3>
<p>Numerical data can be of class <code>integer</code> or <code>numeric</code> (representing real numbers).</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb59-2"><a href="#cb59-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="fu">class</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="fl">+1e-9</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb63-2"><a href="#cb63-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="fu">class</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<p>The <a href="https://r4ds.hadley.nz/numbers">Numbers</a> chapter in R4DS covers the following functions that are all useful for wrangling numeric data:</p>
<ul>
<li>
<code>n()</code>, <code>n_distinct()</code>: Counting and counting the number of unique values</li>
<li>
<code>sum(is.na())</code>: Counting the number of missing values</li>
<li>
<code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">max()</a></code>
</li>
<li>
<code><a href="https://rdrr.io/r/base/Extremes.html">pmin()</a></code>, <code><a href="https://rdrr.io/r/base/Extremes.html">pmax()</a></code>: Get the min and max across several vectors</li>
<li>Integer division: <code>%/%</code>. Remainder: <code>%%</code>
<ul>
<li>
<code>121 %/% 100 = 1</code> and <code>121 %% 100 = 21</code>
</li>
</ul>
</li>
<li>
<code><a href="https://rdrr.io/r/base/Round.html">round()</a></code>, <code><a href="https://rdrr.io/r/base/Round.html">floor()</a></code>, <code><a href="https://rdrr.io/r/base/Round.html">ceiling()</a></code>: Rounding functions (to a specified number of decimal places, to the largest integer below a number, to the smallest integer above a number)</li>
<li>
<code><a href="https://rdrr.io/r/base/cut.html">cut()</a></code>: Cut a numerical vector into categories</li>
<li>
<code><a href="https://rdrr.io/r/base/cumsum.html">cumsum()</a></code>, <code>cummean()</code>, <code><a href="https://rdrr.io/r/base/cumsum.html">cummin()</a></code>, <code><a href="https://rdrr.io/r/base/cumsum.html">cummax()</a></code>: Cumulative functions</li>
<li>
<code><a href="https://rdrr.io/r/base/rank.html">rank()</a></code>: Provide the ranks of the numbers in a vector</li>
<li>
<code>lead(), lag()</code>: shift a vector by padding with NAs</li>
<li>Numerical summaries: <code>mean</code>, <code>median</code>, <code>min</code>, <code>max</code>, <code>quantile</code>, <code>sd</code>, <code>IQR</code>
<ul>
<li>Note that all numerical summary functions have an <code>na.rm</code> argument that should be set to <code>TRUE</code> if you have missing data.</li>
</ul>
</li>
</ul></section><section id="exercises-1" class="level3"><h3 class="anchored" data-anchor-id="exercises-1">Exercises</h3>
<p>Exercises will be on HW4.</p>
<p>The best way to add these functions and operators to your vocabulary is to need to recall them. Refer to the list of functions above as you try the exercises.</p>
<p>You will need to reference function documentation to look at arguments and look in the Examples section.</p>
</section></section><section id="dates" class="level2"><h2 class="anchored" data-anchor-id="dates">Dates</h2>
<section id="notes-2" class="level3"><h3 class="anchored" data-anchor-id="notes-2">Notes</h3>
<p>The <code>lubridate</code> package contains useful functions for working with dates and times. The <code>lubridate</code> <a href="https://lubridate.tidyverse.org/reference/index.html">function reference</a> is a useful resource for finding the functions you need. We’ll take a brief tour of this reference page.</p>
<p>We’ll use the <code>lakers</code> dataset in the <code>lubridate</code> package to illustrate some examples.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>lakers <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(lakers)</span>
<span id="cb67-2"><a href="#cb67-2"></a><span class="fu">head</span>(lakers)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
     date opponent game_type time  period etype team  player result points type 
    &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;  &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;
1  2.01e7 POR      home      12:00      1 jump… OFF   ""     ""          0 ""   
2  2.01e7 POR      home      11:39      1 shot  LAL   "Pau … "miss…      0 "hoo…
3  2.01e7 POR      home      11:37      1 rebo… LAL   "Vlad… ""          0 "off"
4  2.01e7 POR      home      11:25      1 shot  LAL   "Dere… "miss…      0 "lay…
5  2.01e7 POR      home      11:23      1 rebo… LAL   "Pau … ""          0 "off"
6  2.01e7 POR      home      11:22      1 shot  LAL   "Pau … "made"      2 "hoo…
# ℹ 2 more variables: x &lt;int&gt;, y &lt;int&gt;</code></pre>
</div>
</div>
<p>Below we use date-time <a href="https://lubridate.tidyverse.org/reference/index.html#date-time-parsing">parsing functions</a> to represent the <code>date</code> and <code>time</code> variables with date-time classes:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1"></a>lakers <span class="ot">&lt;-</span> lakers <span class="sc">|&gt;</span></span>
<span id="cb69-2"><a href="#cb69-2"></a>    <span class="fu">mutate</span>(</span>
<span id="cb69-3"><a href="#cb69-3"></a>        <span class="at">date =</span> <span class="fu">ymd</span>(date),</span>
<span id="cb69-4"><a href="#cb69-4"></a>        <span class="at">time =</span> <span class="fu">ms</span>(time)</span>
<span id="cb69-5"><a href="#cb69-5"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Below we use <a href="https://lubridate.tidyverse.org/reference/index.html#setting-getting-and-rounding">extraction functions</a> to get components of the date-time objects:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a>lakers_clean <span class="ot">&lt;-</span> lakers <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href="#cb70-2"></a>    <span class="fu">mutate</span>(</span>
<span id="cb70-3"><a href="#cb70-3"></a>        <span class="at">year =</span> <span class="fu">year</span>(date),</span>
<span id="cb70-4"><a href="#cb70-4"></a>        <span class="at">month =</span> <span class="fu">month</span>(date),</span>
<span id="cb70-5"><a href="#cb70-5"></a>        <span class="at">day =</span> <span class="fu">day</span>(date),</span>
<span id="cb70-6"><a href="#cb70-6"></a>        <span class="at">day_of_week =</span> <span class="fu">wday</span>(date, <span class="at">label =</span> <span class="cn">TRUE</span>),</span>
<span id="cb70-7"><a href="#cb70-7"></a>        <span class="at">minute =</span> <span class="fu">minute</span>(time),</span>
<span id="cb70-8"><a href="#cb70-8"></a>        <span class="at">second =</span> <span class="fu">second</span>(time)</span>
<span id="cb70-9"><a href="#cb70-9"></a>    )</span>
<span id="cb70-10"><a href="#cb70-10"></a>lakers_clean <span class="sc">|&gt;</span> <span class="fu">select</span>(year<span class="sc">:</span>second)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 34,624 × 6
    year month   day day_of_week minute second
   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;ord&gt;        &lt;dbl&gt;  &lt;dbl&gt;
 1  2008    10    28 Tue             12      0
 2  2008    10    28 Tue             11     39
 3  2008    10    28 Tue             11     37
 4  2008    10    28 Tue             11     25
 5  2008    10    28 Tue             11     23
 6  2008    10    28 Tue             11     22
 7  2008    10    28 Tue             11     22
 8  2008    10    28 Tue             11     22
 9  2008    10    28 Tue             11      0
10  2008    10    28 Tue             10     53
# ℹ 34,614 more rows</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>lakers_clean <span class="ot">&lt;-</span> lakers_clean <span class="sc">|&gt;</span></span>
<span id="cb72-2"><a href="#cb72-2"></a>    <span class="fu">group_by</span>(date, opponent, period) <span class="sc">|&gt;</span></span>
<span id="cb72-3"><a href="#cb72-3"></a>    <span class="fu">arrange</span>(date, opponent, period, <span class="fu">desc</span>(time)) <span class="sc">|&gt;</span></span>
<span id="cb72-4"><a href="#cb72-4"></a>    <span class="fu">mutate</span>(</span>
<span id="cb72-5"><a href="#cb72-5"></a>        <span class="at">diff_btw_plays_sec =</span> <span class="fu">as.numeric</span>(time <span class="sc">-</span> <span class="fu">lag</span>(time, <span class="dv">1</span>))</span>
<span id="cb72-6"><a href="#cb72-6"></a>    )</span>
<span id="cb72-7"><a href="#cb72-7"></a>lakers_clean <span class="sc">|&gt;</span> <span class="fu">select</span>(date, opponent, time, period, diff_btw_plays_sec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 34,624 × 5
# Groups:   date, opponent, period [314]
   date       opponent time     period diff_btw_plays_sec
   &lt;date&gt;     &lt;chr&gt;    &lt;Period&gt;  &lt;int&gt;              &lt;dbl&gt;
 1 2008-10-28 POR      12M 0S        1                 NA
 2 2008-10-28 POR      11M 39S       1                -21
 3 2008-10-28 POR      11M 37S       1                 -2
 4 2008-10-28 POR      11M 25S       1                -12
 5 2008-10-28 POR      11M 23S       1                 -2
 6 2008-10-28 POR      11M 22S       1                 -1
 7 2008-10-28 POR      11M 22S       1                  0
 8 2008-10-28 POR      11M 22S       1                  0
 9 2008-10-28 POR      11M 0S        1                -22
10 2008-10-28 POR      10M 53S       1                 -7
# ℹ 34,614 more rows</code></pre>
</div>
</div>
</section><section id="exercises-2" class="level3"><h3 class="anchored" data-anchor-id="exercises-2">Exercises</h3>
<p>Exercises will be on HW4.</p>
</section></section><section id="factors" class="level2"><h2 class="anchored" data-anchor-id="factors">Factors</h2>
<section id="notes-3" class="level3"><h3 class="anchored" data-anchor-id="notes-3">Notes</h3>
<p><strong>Creating factors</strong></p>
<p>In R, factors are made up of two components: the <strong>actual values</strong> of the data and the possible <strong>levels</strong> within the factor. Creating a factor requires supplying both pieces of information.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a>months <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Mar"</span>, <span class="st">"Dec"</span>, <span class="st">"Jan"</span>,  <span class="st">"Apr"</span>, <span class="st">"Jul"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>However, if we were to sort this vector, R would sort this vector alphabetically.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a><span class="co"># alphabetical sort</span></span>
<span id="cb75-2"><a href="#cb75-2"></a><span class="fu">sort</span>(months)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] "Apr" "Dec" "Jan" "Jul" "Mar"</code></pre>
</div>
</div>
<p>We can fix this sorting by creating a factor version of <code>months</code>. The <code>levels</code> argument is a character vector that specifies the unique values that the factor can take. The order of the values in <code>levels</code> defines the sorting of the factor.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>months_fct <span class="ot">&lt;-</span> <span class="fu">factor</span>(months, <span class="at">levels =</span> month.abb) <span class="co"># month.abb is a built-in variable</span></span>
<span id="cb77-2"><a href="#cb77-2"></a>months_fct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] Mar Dec Jan Apr Jul
Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="fu">sort</span>(months_fct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] Jan Mar Apr Jul Dec
Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre>
</div>
</div>
<p>What if we try to create a factor with values that aren’t in the levels? (e.g., a typo in a month name)</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a>months2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Jna"</span>, <span class="st">"Mar"</span>)</span>
<span id="cb81-2"><a href="#cb81-2"></a><span class="fu">factor</span>(months2, <span class="at">levels =</span> month.abb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>[1] &lt;NA&gt; Mar 
Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre>
</div>
</div>
<p>Because the <code>NA</code> is introduced silently (without any error or warnings), this can be dangerous. It might be better to use the <code>fct()</code> function in the <code>forcats</code> package instead:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a><span class="fu">fct</span>(months2, <span class="at">levels =</span> month.abb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-error">
<pre><code>Error in `fct()`:
! All values of `x` must appear in `levels` or `na`
ℹ Missing level: "Jna"</code></pre>
</div>
</div>
<p><strong>Reordering factors</strong></p>
<p>We’ll use a subset of the General Social Survey (GSS) dataset available in the <code>forcats</code> pacakges.</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="fu">data</span>(gss_cat)</span>
<span id="cb85-2"><a href="#cb85-2"></a><span class="fu">head</span>(gss_cat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 9
   year marital         age race  rincome        partyid     relig denom tvhours
  &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;          &lt;fct&gt;       &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;
1  2000 Never married    26 White $8000 to 9999  Ind,near r… Prot… Sout…      12
2  2000 Divorced         48 White $8000 to 9999  Not str re… Prot… Bapt…      NA
3  2000 Widowed          67 White Not applicable Independent Prot… No d…       2
4  2000 Never married    39 White Not applicable Ind,near r… Orth… Not …       4
5  2000 Divorced         25 White Not applicable Not str de… None  Not …       1
6  2000 Married          25 White $20000 - 24999 Strong dem… Prot… Sout…      NA</code></pre>
</div>
</div>
<p>Reordering the levels of a factor can be useful in plotting when categories would benefit from being sorted in a particular way:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a>relig_summary <span class="ot">&lt;-</span> gss_cat <span class="sc">|&gt;</span></span>
<span id="cb87-2"><a href="#cb87-2"></a>    <span class="fu">group_by</span>(relig) <span class="sc">|&gt;</span></span>
<span id="cb87-3"><a href="#cb87-3"></a>    <span class="fu">summarize</span>(</span>
<span id="cb87-4"><a href="#cb87-4"></a>        <span class="at">tvhours =</span> <span class="fu">mean</span>(tvhours, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb87-5"><a href="#cb87-5"></a>        <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb87-6"><a href="#cb87-6"></a>    )</span>
<span id="cb87-7"><a href="#cb87-7"></a></span>
<span id="cb87-8"><a href="#cb87-8"></a><span class="fu">ggplot</span>(relig_summary, <span class="fu">aes</span>(<span class="at">x =</span> tvhours, <span class="at">y =</span> relig)) <span class="sc">+</span> </span>
<span id="cb87-9"><a href="#cb87-9"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb87-10"><a href="#cb87-10"></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-wrangling-1-notes_files/figure-html/reorder_factors_motivation-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can use <code>fct_reorder()</code> in <code>forcats</code>.</p>
<ul>
<li>The first argument is the factor that you want to reorder the levels of</li>
<li>The second argument determines how the factor is sorted (analogous to what you put inside <code>arrange()</code> when sorting the rows of a data frame.)</li>
</ul>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="fu">ggplot</span>(relig_summary, <span class="fu">aes</span>(<span class="at">x =</span> tvhours, <span class="at">y =</span> <span class="fu">fct_reorder</span>(relig, tvhours))) <span class="sc">+</span></span>
<span id="cb88-2"><a href="#cb88-2"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb88-3"><a href="#cb88-3"></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-wrangling-1-notes_files/figure-html/fct_reorder-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>For bar plots, we can use <code>fct_infreq()</code> to reorder levels from most to least common. This can be combined with <code>fct_rev()</code> to reverse the order (least to most common):</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1"></a>gss_cat <span class="sc">|&gt;</span></span>
<span id="cb89-2"><a href="#cb89-2"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> marital)) <span class="sc">+</span></span>
<span id="cb89-3"><a href="#cb89-3"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb89-4"><a href="#cb89-4"></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-wrangling-1-notes_files/figure-html/fct_infreq_rev-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a>gss_cat <span class="sc">|&gt;</span></span>
<span id="cb90-2"><a href="#cb90-2"></a>    <span class="fu">mutate</span>(<span class="at">marital =</span> marital <span class="sc">|&gt;</span> <span class="fu">fct_infreq</span>() <span class="sc">|&gt;</span> <span class="fu">fct_rev</span>()) <span class="sc">|&gt;</span></span>
<span id="cb90-3"><a href="#cb90-3"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> marital)) <span class="sc">+</span></span>
<span id="cb90-4"><a href="#cb90-4"></a>    <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb90-5"><a href="#cb90-5"></a>    <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="06-wrangling-1-notes_files/figure-html/fct_infreq_rev-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Modifying factor levels</strong></p>
<p>We talked about reordering the levels of a factor–what about changing the values of the levels themselves?</p>
<p>For example, the names of the political parties in the GSS could use elaboration (“str” isn’t a great label for “strong”) and clean up:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a>gss_cat <span class="sc">|&gt;</span> <span class="fu">count</span>(partyid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   partyid                n
   &lt;fct&gt;              &lt;int&gt;
 1 No answer            154
 2 Don't know             1
 3 Other party          393
 4 Strong republican   2314
 5 Not str republican  3032
 6 Ind,near rep        1791
 7 Independent         4119
 8 Ind,near dem        2499
 9 Not str democrat    3690
10 Strong democrat     3490</code></pre>
</div>
</div>
<p>We can use <code>fct_recode()</code> on <code>partyid</code> with the new level names going on the left and the old levels on the right. Any levels that aren’t mentioned explicitly (i.e., “Don’t know” and “Other party”) will be left as is:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a>gss_cat <span class="sc">|&gt;</span></span>
<span id="cb93-2"><a href="#cb93-2"></a>    <span class="fu">mutate</span>(</span>
<span id="cb93-3"><a href="#cb93-3"></a>        <span class="at">partyid =</span> <span class="fu">fct_recode</span>(partyid,</span>
<span id="cb93-4"><a href="#cb93-4"></a>            <span class="st">"Republican, strong"</span>    <span class="ot">=</span> <span class="st">"Strong republican"</span>,</span>
<span id="cb93-5"><a href="#cb93-5"></a>            <span class="st">"Republican, weak"</span>      <span class="ot">=</span> <span class="st">"Not str republican"</span>,</span>
<span id="cb93-6"><a href="#cb93-6"></a>            <span class="st">"Independent, near rep"</span> <span class="ot">=</span> <span class="st">"Ind,near rep"</span>,</span>
<span id="cb93-7"><a href="#cb93-7"></a>            <span class="st">"Independent, near dem"</span> <span class="ot">=</span> <span class="st">"Ind,near dem"</span>,</span>
<span id="cb93-8"><a href="#cb93-8"></a>            <span class="st">"Democrat, weak"</span>        <span class="ot">=</span> <span class="st">"Not str democrat"</span>,</span>
<span id="cb93-9"><a href="#cb93-9"></a>            <span class="st">"Democrat, strong"</span>      <span class="ot">=</span> <span class="st">"Strong democrat"</span></span>
<span id="cb93-10"><a href="#cb93-10"></a>        )</span>
<span id="cb93-11"><a href="#cb93-11"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb93-12"><a href="#cb93-12"></a>    <span class="fu">count</span>(partyid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   partyid                   n
   &lt;fct&gt;                 &lt;int&gt;
 1 No answer               154
 2 Don't know                1
 3 Other party             393
 4 Republican, strong     2314
 5 Republican, weak       3032
 6 Independent, near rep  1791
 7 Independent            4119
 8 Independent, near dem  2499
 9 Democrat, weak         3690
10 Democrat, strong       3490</code></pre>
</div>
</div>
<p>To combine groups, we can assign multiple old levels to the same new level (“Other” maps to “No answer”, “Don’t know”, and “Other party”):</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a>gss_cat <span class="sc">|&gt;</span></span>
<span id="cb95-2"><a href="#cb95-2"></a>    <span class="fu">mutate</span>(</span>
<span id="cb95-3"><a href="#cb95-3"></a>        <span class="at">partyid =</span> <span class="fu">fct_recode</span>(partyid,</span>
<span id="cb95-4"><a href="#cb95-4"></a>            <span class="st">"Republican, strong"</span>    <span class="ot">=</span> <span class="st">"Strong republican"</span>,</span>
<span id="cb95-5"><a href="#cb95-5"></a>            <span class="st">"Republican, weak"</span>      <span class="ot">=</span> <span class="st">"Not str republican"</span>,</span>
<span id="cb95-6"><a href="#cb95-6"></a>            <span class="st">"Independent, near rep"</span> <span class="ot">=</span> <span class="st">"Ind,near rep"</span>,</span>
<span id="cb95-7"><a href="#cb95-7"></a>            <span class="st">"Independent, near dem"</span> <span class="ot">=</span> <span class="st">"Ind,near dem"</span>,</span>
<span id="cb95-8"><a href="#cb95-8"></a>            <span class="st">"Democrat, weak"</span>        <span class="ot">=</span> <span class="st">"Not str democrat"</span>,</span>
<span id="cb95-9"><a href="#cb95-9"></a>            <span class="st">"Democrat, strong"</span>      <span class="ot">=</span> <span class="st">"Strong democrat"</span>,</span>
<span id="cb95-10"><a href="#cb95-10"></a>            <span class="st">"Other"</span>                 <span class="ot">=</span> <span class="st">"No answer"</span>,</span>
<span id="cb95-11"><a href="#cb95-11"></a>            <span class="st">"Other"</span>                 <span class="ot">=</span> <span class="st">"Don't know"</span>,</span>
<span id="cb95-12"><a href="#cb95-12"></a>            <span class="st">"Other"</span>                 <span class="ot">=</span> <span class="st">"Other party"</span></span>
<span id="cb95-13"><a href="#cb95-13"></a>        )</span>
<span id="cb95-14"><a href="#cb95-14"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,483 × 9
    year marital         age race  rincome        partyid    relig denom tvhours
   &lt;int&gt; &lt;fct&gt;         &lt;int&gt; &lt;fct&gt; &lt;fct&gt;          &lt;fct&gt;      &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;
 1  2000 Never married    26 White $8000 to 9999  Independe… Prot… Sout…      12
 2  2000 Divorced         48 White $8000 to 9999  Republica… Prot… Bapt…      NA
 3  2000 Widowed          67 White Not applicable Independe… Prot… No d…       2
 4  2000 Never married    39 White Not applicable Independe… Orth… Not …       4
 5  2000 Divorced         25 White Not applicable Democrat,… None  Not …       1
 6  2000 Married          25 White $20000 - 24999 Democrat,… Prot… Sout…      NA
 7  2000 Never married    36 White $25000 or more Republica… Chri… Not …       3
 8  2000 Divorced         44 White $7000 to 7999  Independe… Prot… Luth…      NA
 9  2000 Married          44 White $25000 or more Democrat,… Prot… Other       0
10  2000 Married          47 White $25000 or more Republica… Prot… Sout…       3
# ℹ 21,473 more rows</code></pre>
</div>
</div>
<p>We can use <code>fct_collapse()</code> to collapse many levels:</p>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a>gss_cat <span class="sc">|&gt;</span></span>
<span id="cb97-2"><a href="#cb97-2"></a>    <span class="fu">mutate</span>(</span>
<span id="cb97-3"><a href="#cb97-3"></a>        <span class="at">partyid =</span> <span class="fu">fct_collapse</span>(partyid,</span>
<span id="cb97-4"><a href="#cb97-4"></a>            <span class="st">"Other"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"No answer"</span>, <span class="st">"Don't know"</span>, <span class="st">"Other party"</span>),</span>
<span id="cb97-5"><a href="#cb97-5"></a>            <span class="st">"Republican"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Strong republican"</span>, <span class="st">"Not str republican"</span>),</span>
<span id="cb97-6"><a href="#cb97-6"></a>            <span class="st">"Independent"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Ind,near rep"</span>, <span class="st">"Independent"</span>, <span class="st">"Ind,near dem"</span>),</span>
<span id="cb97-7"><a href="#cb97-7"></a>            <span class="st">"Democrat"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Not str democrat"</span>, <span class="st">"Strong democrat"</span>)</span>
<span id="cb97-8"><a href="#cb97-8"></a>        )</span>
<span id="cb97-9"><a href="#cb97-9"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb97-10"><a href="#cb97-10"></a>    <span class="fu">count</span>(partyid)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  partyid         n
  &lt;fct&gt;       &lt;int&gt;
1 Other         548
2 Republican   5346
3 Independent  8409
4 Democrat     7180</code></pre>
</div>
</div>
</section><section id="exercises-3" class="level3"><h3 class="anchored" data-anchor-id="exercises-3">Exercises</h3>
<ol type="1">
<li>Create a factor version of the following data with the levels in a sensible order.</li>
</ol>
<div class="cell">
<details class="code-fold"><summary>Code</summary><div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a>ratings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"High"</span>, <span class="st">"Medium"</span>, <span class="st">"Low"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>More exercises will be on HW4.</p>
</section></section><section id="done" class="level2"><h2 class="anchored" data-anchor-id="done">Done!</h2>
<ul>
<li>Check the ICA Instructions for how to (a) push your code to GitHub and (b) update your portfolio website</li>
</ul>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation column-body"><div class="nav-page nav-page-previous">
      <a href="../../src/ica/04-adv-maps-1-notes.html" class="pagination-link" aria-label="4 Advanced Spatial Viz P1">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">4 Advanced Spatial Viz P1</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../src/ica/07-wrangling-2-notes.html" class="pagination-link" aria-label="7 Adv Data wrangling P2">
        <span class="nav-page-text"><span class="chapter-title">7 Adv Data wrangling P2</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb100" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb100-1"><a href="#cb100-1"></a><span class="co">---</span></span>
<span id="cb100-2"><a href="#cb100-2"></a><span class="an">title:</span><span class="co"> "6 Adv Data wrangling P1"</span></span>
<span id="cb100-3"><a href="#cb100-3"></a><span class="co">---</span></span>
<span id="cb100-4"><a href="#cb100-4"></a></span>
<span id="cb100-5"><a href="#cb100-5"></a></span>
<span id="cb100-6"><a href="#cb100-6"></a><span class="fu">## 🧩 Learning Goals</span></span>
<span id="cb100-7"><a href="#cb100-7"></a></span>
<span id="cb100-8"><a href="#cb100-8"></a>By the end of this lesson, you should be able to:</span>
<span id="cb100-9"><a href="#cb100-9"></a></span>
<span id="cb100-10"><a href="#cb100-10"></a><span class="ss">- </span>Determine the class of a given object and identify concerns to be wary of when manipulating an object of that class (numerics, logicals, factors, dates, strings, data.frames)</span>
<span id="cb100-11"><a href="#cb100-11"></a><span class="ss">- </span>Explain what vector recycling is, when it can be a problem, and how to avoid those problems</span>
<span id="cb100-12"><a href="#cb100-12"></a><span class="ss">- </span>Use a variety of functions to wrangle numerical and logical data</span>
<span id="cb100-13"><a href="#cb100-13"></a><span class="ss">- </span>Extract date-time information using the <span class="in">`lubridate`</span> package</span>
<span id="cb100-14"><a href="#cb100-14"></a><span class="ss">- </span>Use the <span class="in">`forcats`</span> package to wrangle factor data</span>
<span id="cb100-15"><a href="#cb100-15"></a></span>
<span id="cb100-16"><a href="#cb100-16"></a></span>
<span id="cb100-17"><a href="#cb100-17"></a></span>
<span id="cb100-18"><a href="#cb100-18"></a><span class="fu">## Helpful Cheatsheets </span></span>
<span id="cb100-19"><a href="#cb100-19"></a></span>
<span id="cb100-20"><a href="#cb100-20"></a>RStudio (Posit) maintains a collection of wonderful <span class="co">[</span><span class="ot">cheatsheets</span><span class="co">](https://rstudio.github.io/cheatsheets/html/data-transformation.html)</span>. The following will be helpful:</span>
<span id="cb100-21"><a href="#cb100-21"></a></span>
<span id="cb100-22"><a href="#cb100-22"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Data transformation with `dplyr`</span><span class="co">](https://rstudio.github.io/cheatsheets/html/data-transformation.html)</span></span>
<span id="cb100-23"><a href="#cb100-23"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Dates and times with `lubridate`</span><span class="co">](https://rstudio.github.io/cheatsheets/html/lubridate.html)</span></span>
<span id="cb100-24"><a href="#cb100-24"></a><span class="ss">- </span><span class="co">[</span><span class="ot">Factors with `forcats`</span><span class="co">](https://rstudio.github.io/cheatsheets/html/factors.html)</span></span>
<span id="cb100-25"><a href="#cb100-25"></a></span>
<span id="cb100-26"><a href="#cb100-26"></a>**Data Wrangling Verbs (from Stat/Comp 112)**</span>
<span id="cb100-27"><a href="#cb100-27"></a></span>
<span id="cb100-28"><a href="#cb100-28"></a><span class="ss">- </span><span class="in">`mutate()`</span>: creates/changes columns/elements in a data frame/tibble</span>
<span id="cb100-29"><a href="#cb100-29"></a><span class="ss">- </span><span class="in">`select()`</span>: keeps subset of columns/elements in a data frame/tibble</span>
<span id="cb100-30"><a href="#cb100-30"></a><span class="ss">- </span><span class="in">`filter()`</span>: keeps subsets of rows in a data frame/tibble</span>
<span id="cb100-31"><a href="#cb100-31"></a><span class="ss">- </span><span class="in">`arrange()`</span>: sorts rows in a data frame/tibble</span>
<span id="cb100-32"><a href="#cb100-32"></a><span class="ss">- </span><span class="in">`group_by()`</span>: internally groups rows in data frame/tibble by values in 1 or more columsn/elements</span>
<span id="cb100-33"><a href="#cb100-33"></a><span class="ss">- </span><span class="in">`summarize()`</span>: collapses/combines information across rows using functions such as <span class="in">`n()`</span>, <span class="in">`sum()`</span>, <span class="in">`mean()`</span>, <span class="in">`min()`</span>, <span class="in">`max()`</span>, <span class="in">`median()`</span>, <span class="in">`sd()`</span></span>
<span id="cb100-34"><a href="#cb100-34"></a><span class="ss">- </span><span class="in">`count()`</span>: shortcut for <span class="in">`group_by() |&gt; summarize(n = n())`</span></span>
<span id="cb100-35"><a href="#cb100-35"></a><span class="ss">- </span><span class="in">`left_join()`</span>: mutating join of two data frames/tibbles keeping all rows in left data frame</span>
<span id="cb100-36"><a href="#cb100-36"></a><span class="ss">- </span><span class="in">`full_join()`</span>: mutating join of two data frames/tibbles keeping all rows in both data frames</span>
<span id="cb100-37"><a href="#cb100-37"></a><span class="ss">- </span><span class="in">`inner_join()`</span>: mutating join of two data frames/tibbles keeping rows in left data frame that find match in right</span>
<span id="cb100-38"><a href="#cb100-38"></a><span class="ss">- </span><span class="in">`semi_join()`</span>: filtering join of two data frames/tibbles keeping rows in left data frame that find match in right</span>
<span id="cb100-39"><a href="#cb100-39"></a><span class="ss">- </span><span class="in">`anti_join()`</span>: filtering join of two data frames/tibbles keeping rows in left data frame that do not find match in right</span>
<span id="cb100-40"><a href="#cb100-40"></a><span class="ss">- </span><span class="in">`pivot_wider()`</span>: rearrange values from two columns to many(one column becomes the names of new variables, one column becomes the values of the new variables)</span>
<span id="cb100-41"><a href="#cb100-41"></a><span class="ss">- </span><span class="in">`pivot_longer()`</span>: rearrange values from many columns to two (the names of the columns go to one new variable, the values of the columns go to a second new variable)</span>
<span id="cb100-42"><a href="#cb100-42"></a></span>
<span id="cb100-43"><a href="#cb100-43"></a></span>
<span id="cb100-44"><a href="#cb100-44"></a><span class="in">```{r doc_setup}</span></span>
<span id="cb100-45"><a href="#cb100-45"></a><span class="in">#| include: false</span></span>
<span id="cb100-46"><a href="#cb100-46"></a></span>
<span id="cb100-47"><a href="#cb100-47"></a><span class="in">library(tidyverse)</span></span>
<span id="cb100-48"><a href="#cb100-48"></a><span class="in">```</span></span>
<span id="cb100-49"><a href="#cb100-49"></a></span>
<span id="cb100-50"><a href="#cb100-50"></a></span>
<span id="cb100-51"><a href="#cb100-51"></a><span class="fu">## Vectors </span></span>
<span id="cb100-52"><a href="#cb100-52"></a></span>
<span id="cb100-53"><a href="#cb100-53"></a>An **atomic vector** is a storage container in R where all elements in the container are of the same type. The types that are relevant to data science are:</span>
<span id="cb100-54"><a href="#cb100-54"></a></span>
<span id="cb100-55"><a href="#cb100-55"></a><span class="ss">- </span><span class="in">`logical`</span> (also known as boolean)</span>
<span id="cb100-56"><a href="#cb100-56"></a><span class="ss">- </span>numbers</span>
<span id="cb100-57"><a href="#cb100-57"></a><span class="ss">  - </span><span class="in">`integer`</span></span>
<span id="cb100-58"><a href="#cb100-58"></a><span class="ss">  - </span><span class="in">`numeric`</span> floating point (also known as double)</span>
<span id="cb100-59"><a href="#cb100-59"></a><span class="ss">- </span><span class="in">`character`</span> string </span>
<span id="cb100-60"><a href="#cb100-60"></a><span class="ss">- </span><span class="in">`Date`</span> and date-time (saved as <span class="in">`POSIXct`</span>)</span>
<span id="cb100-61"><a href="#cb100-61"></a><span class="ss">- </span><span class="in">`factor`</span></span>
<span id="cb100-62"><a href="#cb100-62"></a></span>
<span id="cb100-63"><a href="#cb100-63"></a></span>
<span id="cb100-64"><a href="#cb100-64"></a>Function documentation will refer to vectors frequently. </span>
<span id="cb100-65"><a href="#cb100-65"></a></span>
<span id="cb100-66"><a href="#cb100-66"></a>See examples below:</span>
<span id="cb100-67"><a href="#cb100-67"></a></span>
<span id="cb100-68"><a href="#cb100-68"></a><span class="ss">- </span><span class="in">`ggplot2::scale_x_continuous()`</span></span>
<span id="cb100-69"><a href="#cb100-69"></a><span class="ss">    - </span><span class="in">`breaks`</span>: A **numeric vector** of positions</span>
<span id="cb100-70"><a href="#cb100-70"></a><span class="ss">    - </span><span class="in">`labels`</span>: A **character vector** giving labels (must be same length as breaks)</span>
<span id="cb100-71"><a href="#cb100-71"></a><span class="ss">- </span><span class="in">`shiny::sliderInput()`</span></span>
<span id="cb100-72"><a href="#cb100-72"></a><span class="ss">    - </span><span class="in">`value`</span>: The initial value of the slider <span class="co">[</span><span class="ot">...</span><span class="co">]</span> A **length one vector** will create a regular slider; a **length two vector** will create a double-ended range slider.</span>
<span id="cb100-73"><a href="#cb100-73"></a></span>
<span id="cb100-74"><a href="#cb100-74"></a></span>
<span id="cb100-75"><a href="#cb100-75"></a></span>
<span id="cb100-76"><a href="#cb100-76"></a>When you need a vector, you can create one manually using</span>
<span id="cb100-77"><a href="#cb100-77"></a></span>
<span id="cb100-78"><a href="#cb100-78"></a><span class="ss">- </span><span class="in">`c()`</span>: the combine function</span>
<span id="cb100-79"><a href="#cb100-79"></a></span>
<span id="cb100-80"><a href="#cb100-80"></a>Or you can create one based on available data using</span>
<span id="cb100-81"><a href="#cb100-81"></a></span>
<span id="cb100-82"><a href="#cb100-82"></a><span class="ss">- </span><span class="in">`dataset |&gt; mutate(newvar = variable &gt; 5) |&gt; pull(newvar)`</span>: taking one column out of a dataset</span>
<span id="cb100-83"><a href="#cb100-83"></a><span class="ss">- </span><span class="in">`dataset |&gt; pull(variable) |&gt; unique()`</span>: taking one column out of a dataset and finding unique values</span>
<span id="cb100-84"><a href="#cb100-84"></a></span>
<span id="cb100-85"><a href="#cb100-85"></a><span class="in">```{r create_vec_examples}</span></span>
<span id="cb100-86"><a href="#cb100-86"></a><span class="in">c("Fair", "Good", "Very Good", "Premium", "Ideal")</span></span>
<span id="cb100-87"><a href="#cb100-87"></a></span>
<span id="cb100-88"><a href="#cb100-88"></a><span class="in">diamonds |&gt; pull(cut) |&gt; unique()</span></span>
<span id="cb100-89"><a href="#cb100-89"></a><span class="in">```</span></span>
<span id="cb100-90"><a href="#cb100-90"></a></span>
<span id="cb100-91"><a href="#cb100-91"></a></span>
<span id="cb100-92"><a href="#cb100-92"></a></span>
<span id="cb100-93"><a href="#cb100-93"></a><span class="fu">## Logicals </span></span>
<span id="cb100-94"><a href="#cb100-94"></a></span>
<span id="cb100-95"><a href="#cb100-95"></a></span>
<span id="cb100-96"><a href="#cb100-96"></a><span class="fu">### Notes </span></span>
<span id="cb100-97"><a href="#cb100-97"></a></span>
<span id="cb100-98"><a href="#cb100-98"></a>What does a logical vector look like?</span>
<span id="cb100-99"><a href="#cb100-99"></a></span>
<span id="cb100-100"><a href="#cb100-100"></a><span class="in">```{r logicals}</span></span>
<span id="cb100-101"><a href="#cb100-101"></a><span class="in">x &lt;- c(TRUE, FALSE, NA)</span></span>
<span id="cb100-102"><a href="#cb100-102"></a><span class="in">x</span></span>
<span id="cb100-103"><a href="#cb100-103"></a><span class="in">class(x)</span></span>
<span id="cb100-104"><a href="#cb100-104"></a><span class="in">```</span></span>
<span id="cb100-105"><a href="#cb100-105"></a></span>
<span id="cb100-106"><a href="#cb100-106"></a></span>
<span id="cb100-107"><a href="#cb100-107"></a>You will often create logical vectors with comparison operators: <span class="in">`&gt;`</span>, <span class="in">`&lt;`</span>, <span class="in">`&lt;=`</span>, <span class="in">`&gt;=`</span>, <span class="in">`==`</span>, <span class="in">`!=`</span>.</span>
<span id="cb100-108"><a href="#cb100-108"></a></span>
<span id="cb100-109"><a href="#cb100-109"></a><span class="in">```{r comparison_operators}</span></span>
<span id="cb100-110"><a href="#cb100-110"></a><span class="in">x &lt;- c(1, 2, 9, 12)</span></span>
<span id="cb100-111"><a href="#cb100-111"></a><span class="in">x &lt; 2</span></span>
<span id="cb100-112"><a href="#cb100-112"></a><span class="in">x &lt;= 2</span></span>
<span id="cb100-113"><a href="#cb100-113"></a><span class="in">x &gt; 9</span></span>
<span id="cb100-114"><a href="#cb100-114"></a><span class="in">x &gt;= 9</span></span>
<span id="cb100-115"><a href="#cb100-115"></a><span class="in">x == 12</span></span>
<span id="cb100-116"><a href="#cb100-116"></a><span class="in">x != 12</span></span>
<span id="cb100-117"><a href="#cb100-117"></a><span class="in">```</span></span>
<span id="cb100-118"><a href="#cb100-118"></a></span>
<span id="cb100-119"><a href="#cb100-119"></a></span>
<span id="cb100-120"><a href="#cb100-120"></a>When you want to check for set containment, the <span class="in">`%in%`</span> operator is the correct way to do this (as opposed to <span class="in">`==`</span>).</span>
<span id="cb100-121"><a href="#cb100-121"></a></span>
<span id="cb100-122"><a href="#cb100-122"></a><span class="in">```{r in_operator}</span></span>
<span id="cb100-123"><a href="#cb100-123"></a><span class="in">#| warning: true</span></span>
<span id="cb100-124"><a href="#cb100-124"></a></span>
<span id="cb100-125"><a href="#cb100-125"></a><span class="in">x &lt;- c(1, 2, 9, 4)</span></span>
<span id="cb100-126"><a href="#cb100-126"></a><span class="in">x == c(1, 2, 4)</span></span>
<span id="cb100-127"><a href="#cb100-127"></a><span class="in">x %in% c(1, 2, 4)</span></span>
<span id="cb100-128"><a href="#cb100-128"></a><span class="in">```</span></span>
<span id="cb100-129"><a href="#cb100-129"></a></span>
<span id="cb100-130"><a href="#cb100-130"></a></span>
<span id="cb100-131"><a href="#cb100-131"></a>The <span class="in">`Warning: longer object length is not a multiple of shorter object length`</span> is a manifestation of **vector recycling**. </span>
<span id="cb100-132"><a href="#cb100-132"></a></span>
<span id="cb100-133"><a href="#cb100-133"></a>In R, if two vectors are being combined or compared, the shorter one will be repeated to match the length of the longer one--even if longer object length isn't a multiple of the shorter object length. We can see the exact recycling that happens below:</span>
<span id="cb100-134"><a href="#cb100-134"></a></span>
<span id="cb100-135"><a href="#cb100-135"></a><span class="in">```{r recycling}</span></span>
<span id="cb100-136"><a href="#cb100-136"></a><span class="in">x &lt;- c(1, 2, 9, 4)</span></span>
<span id="cb100-137"><a href="#cb100-137"></a><span class="in">x == c(1, 2, 4)</span></span>
<span id="cb100-138"><a href="#cb100-138"></a><span class="in">x == c(1, 2, 4, 1) # This line demonstrates the recycling that happens on the previous line</span></span>
<span id="cb100-139"><a href="#cb100-139"></a><span class="in">```</span></span>
<span id="cb100-140"><a href="#cb100-140"></a></span>
<span id="cb100-141"><a href="#cb100-141"></a></span>
<span id="cb100-142"><a href="#cb100-142"></a>Logical vectors can also be created with functions. <span class="in">`is.na()`</span> is one useful example:</span>
<span id="cb100-143"><a href="#cb100-143"></a></span>
<span id="cb100-144"><a href="#cb100-144"></a><span class="in">```{r is_na}</span></span>
<span id="cb100-145"><a href="#cb100-145"></a><span class="in">x &lt;- c(1, 4, 9, NA)</span></span>
<span id="cb100-146"><a href="#cb100-146"></a><span class="in">x == NA</span></span>
<span id="cb100-147"><a href="#cb100-147"></a><span class="in">is.na(x)</span></span>
<span id="cb100-148"><a href="#cb100-148"></a><span class="in">```</span></span>
<span id="cb100-149"><a href="#cb100-149"></a></span>
<span id="cb100-150"><a href="#cb100-150"></a></span>
<span id="cb100-151"><a href="#cb100-151"></a>We can negate a logical object with <span class="in">`!`</span>. We can combine logical objects with <span class="in">`&amp;`</span> (and) and  <span class="in">`|`</span> (or).</span>
<span id="cb100-152"><a href="#cb100-152"></a></span>
<span id="cb100-153"><a href="#cb100-153"></a><span class="in">```{r negate_and_or}</span></span>
<span id="cb100-154"><a href="#cb100-154"></a><span class="in">x &lt;- c(1, 2, 4, 9)</span></span>
<span id="cb100-155"><a href="#cb100-155"></a><span class="in">x &gt; 1 &amp; x &lt; 5</span></span>
<span id="cb100-156"><a href="#cb100-156"></a><span class="in">!(x &gt; 1 &amp; x &lt; 5)</span></span>
<span id="cb100-157"><a href="#cb100-157"></a><span class="in">x &lt; 2 | x &gt; 8</span></span>
<span id="cb100-158"><a href="#cb100-158"></a><span class="in">```</span></span>
<span id="cb100-159"><a href="#cb100-159"></a></span>
<span id="cb100-160"><a href="#cb100-160"></a></span>
<span id="cb100-161"><a href="#cb100-161"></a>We can summarize logical vectors with:</span>
<span id="cb100-162"><a href="#cb100-162"></a></span>
<span id="cb100-163"><a href="#cb100-163"></a><span class="ss">- </span><span class="in">`any()`</span>: Are ANY of the values <span class="in">`TRUE`</span>?</span>
<span id="cb100-164"><a href="#cb100-164"></a><span class="ss">- </span><span class="in">`all()`</span>: Are ALL of the values <span class="in">`TRUE`</span>?</span>
<span id="cb100-165"><a href="#cb100-165"></a><span class="ss">- </span><span class="in">`sum()`</span>: How many of the values are <span class="in">`TRUE`</span>?</span>
<span id="cb100-166"><a href="#cb100-166"></a><span class="ss">- </span><span class="in">`mean()`</span>: What fraction of the values are <span class="in">`TRUE`</span>?</span>
<span id="cb100-167"><a href="#cb100-167"></a></span>
<span id="cb100-168"><a href="#cb100-168"></a><span class="in">```{r summarize_logical}</span></span>
<span id="cb100-169"><a href="#cb100-169"></a><span class="in">x &lt;- c(1, 2, 4, 9)</span></span>
<span id="cb100-170"><a href="#cb100-170"></a><span class="in">any(x == 1)</span></span>
<span id="cb100-171"><a href="#cb100-171"></a><span class="in">all(x &lt; 10)</span></span>
<span id="cb100-172"><a href="#cb100-172"></a><span class="in">sum(x == 1)</span></span>
<span id="cb100-173"><a href="#cb100-173"></a><span class="in">mean(x == 1)</span></span>
<span id="cb100-174"><a href="#cb100-174"></a><span class="in">```</span></span>
<span id="cb100-175"><a href="#cb100-175"></a></span>
<span id="cb100-176"><a href="#cb100-176"></a><span class="in">`if_else()`</span> and <span class="in">`case_when()`</span> are functions that allow you to return values depending on the value of a logical vector. You'll explore the documentation for these in the following exercises.</span>
<span id="cb100-177"><a href="#cb100-177"></a></span>
<span id="cb100-178"><a href="#cb100-178"></a></span>
<span id="cb100-179"><a href="#cb100-179"></a>::: {.callout-tip appearance='simple' icon=false}</span>
<span id="cb100-180"><a href="#cb100-180"></a>Note: <span class="in">`ifelse()`</span> (from base R) and <span class="in">`if_else()`</span> (from tidyverse) are different functions. We prefer <span class="in">`if_else()`</span> for many reasons (examples below).</span>
<span id="cb100-181"><a href="#cb100-181"></a></span>
<span id="cb100-182"><a href="#cb100-182"></a><span class="ss">- </span>Noisy to make sure you catch issues/bugs</span>
<span id="cb100-183"><a href="#cb100-183"></a><span class="ss">- </span>Can explicitly handle missing values</span>
<span id="cb100-184"><a href="#cb100-184"></a><span class="ss">- </span>Keeps dates as dates</span>
<span id="cb100-185"><a href="#cb100-185"></a></span>
<span id="cb100-186"><a href="#cb100-186"></a>&lt;details&gt;</span>
<span id="cb100-187"><a href="#cb100-187"></a>&lt;summary&gt;Examples&lt;/summary&gt;</span>
<span id="cb100-188"><a href="#cb100-188"></a><span class="in">```{r eval=FALSE}</span></span>
<span id="cb100-189"><a href="#cb100-189"></a><span class="in">#| error: true</span></span>
<span id="cb100-190"><a href="#cb100-190"></a></span>
<span id="cb100-191"><a href="#cb100-191"></a><span class="in">x &lt;- c(-1, -2, 4, 9, NA)</span></span>
<span id="cb100-192"><a href="#cb100-192"></a></span>
<span id="cb100-193"><a href="#cb100-193"></a><span class="in">ifelse(x &gt; 0, 'positive', 'negative')</span></span>
<span id="cb100-194"><a href="#cb100-194"></a><span class="in">if_else(x &gt; 0, 'positive', 'negative')</span></span>
<span id="cb100-195"><a href="#cb100-195"></a></span>
<span id="cb100-196"><a href="#cb100-196"></a></span>
<span id="cb100-197"><a href="#cb100-197"></a><span class="in">ifelse(x &gt; 0, 1, 'negative') # Bad: doesn't complain with combo of data types</span></span>
<span id="cb100-198"><a href="#cb100-198"></a><span class="in">if_else(x &gt; 0, 1, 'negative') # Good:noisy to make sure you catch issues</span></span>
<span id="cb100-199"><a href="#cb100-199"></a></span>
<span id="cb100-200"><a href="#cb100-200"></a><span class="in">if_else(x &gt; 0, 'positive', 'negative', missing = 'missing') # Good: can explicitly handle NA</span></span>
<span id="cb100-201"><a href="#cb100-201"></a></span>
<span id="cb100-202"><a href="#cb100-202"></a><span class="in">fun_dates &lt;- mdy('1-1-2025') + 0:365</span></span>
<span id="cb100-203"><a href="#cb100-203"></a><span class="in">ifelse(fun_dates &lt; today(), fun_dates + years(), fun_dates) # Bad: converts dates to integers</span></span>
<span id="cb100-204"><a href="#cb100-204"></a><span class="in">if_else(fun_dates &lt; today(), fun_dates + years(), fun_dates) # Good: keeps dates as dates</span></span>
<span id="cb100-205"><a href="#cb100-205"></a><span class="in">```</span></span>
<span id="cb100-206"><a href="#cb100-206"></a>&lt;/details&gt;</span>
<span id="cb100-207"><a href="#cb100-207"></a>:::</span>
<span id="cb100-208"><a href="#cb100-208"></a></span>
<span id="cb100-209"><a href="#cb100-209"></a><span class="fu">### Exercises </span></span>
<span id="cb100-210"><a href="#cb100-210"></a></span>
<span id="cb100-211"><a href="#cb100-211"></a>Load the diamonds dataset, and filter to the first 1000 diamonds.</span>
<span id="cb100-212"><a href="#cb100-212"></a></span>
<span id="cb100-213"><a href="#cb100-213"></a><span class="in">```{r diamonds_prep}</span></span>
<span id="cb100-214"><a href="#cb100-214"></a><span class="in">data(diamonds)</span></span>
<span id="cb100-215"><a href="#cb100-215"></a><span class="in">diamonds &lt;- diamonds |&gt; </span></span>
<span id="cb100-216"><a href="#cb100-216"></a><span class="in">    slice_head(n = 1000) # fist 1000 rows</span></span>
<span id="cb100-217"><a href="#cb100-217"></a><span class="in">```</span></span>
<span id="cb100-218"><a href="#cb100-218"></a></span>
<span id="cb100-219"><a href="#cb100-219"></a>Using <span class="in">`tidyverse`</span> functions, complete the following:</span>
<span id="cb100-220"><a href="#cb100-220"></a></span>
<span id="cb100-221"><a href="#cb100-221"></a><span class="ss">1. </span>Subset to diamonds that are less than 400 dollars or more than 10000 dollars.</span>
<span id="cb100-222"><a href="#cb100-222"></a><span class="ss">2. </span>Subset to diamonds that are between 500 and 600 dollars (inclusive).</span>
<span id="cb100-223"><a href="#cb100-223"></a><span class="ss">3. </span>How many diamonds are of either Fair, Premium, or Ideal cut (a total count)? What fraction of diamonds are of Fair, Premium, or Ideal cut?</span>
<span id="cb100-224"><a href="#cb100-224"></a><span class="ss">    - </span>First, do this a wrong way with <span class="in">`==`</span>. Predict the warning message that you will receive.</span>
<span id="cb100-225"><a href="#cb100-225"></a><span class="ss">    - </span>Second, do this the correct way with an appropriate logical operator.</span>
<span id="cb100-226"><a href="#cb100-226"></a><span class="ss">4. </span>Are there any diamonds of Fair cut that are more than \$3000? Are all diamonds of Ideal cut more than \$2000?</span>
<span id="cb100-227"><a href="#cb100-227"></a><span class="ss">5. </span>Create two new categorized versions of <span class="in">`price`</span> by looking up the documentation for <span class="in">`if_else()`</span> and <span class="in">`case_when()`</span>:</span>
<span id="cb100-228"><a href="#cb100-228"></a><span class="ss">    - </span><span class="in">`price_cat1`</span>: "low" if price is less than 500 and "high" otherwise</span>
<span id="cb100-229"><a href="#cb100-229"></a><span class="ss">    - </span><span class="in">`price_cat2`</span>: "low" if price is less than 500, "medium" if price is between 500 and 1000 dollars inclusive, and "high" otherwise.</span>
<span id="cb100-230"><a href="#cb100-230"></a></span>
<span id="cb100-231"><a href="#cb100-231"></a></span>
<span id="cb100-232"><a href="#cb100-232"></a></span>
<span id="cb100-235"><a href="#cb100-235"></a><span class="in">```{r}</span></span>
<span id="cb100-236"><a href="#cb100-236"></a><span class="co">#1</span></span>
<span id="cb100-237"><a href="#cb100-237"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb100-238"><a href="#cb100-238"></a>  <span class="fu">filter</span>(price <span class="sc">&lt;</span> <span class="dv">400</span> <span class="sc">|</span> price <span class="sc">&gt;</span> <span class="dv">10000</span>)</span>
<span id="cb100-239"><a href="#cb100-239"></a><span class="co">#2</span></span>
<span id="cb100-240"><a href="#cb100-240"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb100-241"><a href="#cb100-241"></a>  <span class="fu">filter</span>(price <span class="sc">&lt;=</span> <span class="dv">600</span> <span class="sc">&amp;</span> price <span class="sc">&gt;=</span> <span class="dv">500</span>)</span>
<span id="cb100-242"><a href="#cb100-242"></a><span class="co">#3</span></span>
<span id="cb100-243"><a href="#cb100-243"></a><span class="co"># diamonds |&gt;</span></span>
<span id="cb100-244"><a href="#cb100-244"></a>  <span class="co"># sum(cut == c("Fair", "Premium", "Ideal")) # Incorrect</span></span>
<span id="cb100-245"><a href="#cb100-245"></a></span>
<span id="cb100-246"><a href="#cb100-246"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb100-247"><a href="#cb100-247"></a>  <span class="fu">mutate</span>(<span class="at">cut1 =</span> cut <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Fair"</span>, <span class="st">"Premium"</span>, <span class="st">"Ideal"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb100-248"><a href="#cb100-248"></a>  <span class="fu">summarize</span>(<span class="fu">sum</span>(cut1), <span class="fu">mean</span>(cut1)) </span>
<span id="cb100-249"><a href="#cb100-249"></a>  </span>
<span id="cb100-250"><a href="#cb100-250"></a><span class="co">#4</span></span>
<span id="cb100-251"><a href="#cb100-251"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb100-252"><a href="#cb100-252"></a>  <span class="fu">filter</span>(cut <span class="sc">==</span> <span class="st">"Fair"</span>) <span class="sc">|&gt;</span></span>
<span id="cb100-253"><a href="#cb100-253"></a>  <span class="fu">summarize</span>(<span class="fu">any</span>(price <span class="sc">&gt;</span> <span class="dv">3000</span>))</span>
<span id="cb100-254"><a href="#cb100-254"></a>  </span>
<span id="cb100-255"><a href="#cb100-255"></a><span class="co">#5</span></span>
<span id="cb100-256"><a href="#cb100-256"></a></span>
<span id="cb100-257"><a href="#cb100-257"></a><span class="in">```</span></span>
<span id="cb100-258"><a href="#cb100-258"></a></span>
<span id="cb100-259"><a href="#cb100-259"></a></span>
<span id="cb100-260"><a href="#cb100-260"></a><span class="fu">## Numerics </span></span>
<span id="cb100-261"><a href="#cb100-261"></a></span>
<span id="cb100-262"><a href="#cb100-262"></a><span class="fu">### Notes </span></span>
<span id="cb100-263"><a href="#cb100-263"></a></span>
<span id="cb100-264"><a href="#cb100-264"></a>Numerical data can be of class <span class="in">`integer`</span> or <span class="in">`numeric`</span> (representing real numbers).</span>
<span id="cb100-265"><a href="#cb100-265"></a></span>
<span id="cb100-266"><a href="#cb100-266"></a><span class="in">```{r numerical_classes}</span></span>
<span id="cb100-267"><a href="#cb100-267"></a><span class="in">x &lt;- 1:3</span></span>
<span id="cb100-268"><a href="#cb100-268"></a><span class="in">x</span></span>
<span id="cb100-269"><a href="#cb100-269"></a><span class="in">class(x)</span></span>
<span id="cb100-270"><a href="#cb100-270"></a></span>
<span id="cb100-271"><a href="#cb100-271"></a><span class="in">x &lt;- c(1+1e-9, 2, 3)</span></span>
<span id="cb100-272"><a href="#cb100-272"></a><span class="in">x</span></span>
<span id="cb100-273"><a href="#cb100-273"></a><span class="in">class(x)</span></span>
<span id="cb100-274"><a href="#cb100-274"></a><span class="in">```</span></span>
<span id="cb100-275"><a href="#cb100-275"></a></span>
<span id="cb100-276"><a href="#cb100-276"></a></span>
<span id="cb100-277"><a href="#cb100-277"></a>The <span class="co">[</span><span class="ot">Numbers</span><span class="co">](https://r4ds.hadley.nz/numbers)</span> chapter in R4DS covers the following functions that are all useful for wrangling numeric data:</span>
<span id="cb100-278"><a href="#cb100-278"></a></span>
<span id="cb100-279"><a href="#cb100-279"></a><span class="ss">- </span><span class="in">`n()`</span>, <span class="in">`n_distinct()`</span>: Counting and counting the number of unique values</span>
<span id="cb100-280"><a href="#cb100-280"></a><span class="ss">- </span><span class="in">`sum(is.na())`</span>: Counting the number of missing values</span>
<span id="cb100-281"><a href="#cb100-281"></a><span class="ss">- </span><span class="in">`min()`</span>, <span class="in">`max()`</span></span>
<span id="cb100-282"><a href="#cb100-282"></a><span class="ss">- </span><span class="in">`pmin()`</span>, <span class="in">`pmax()`</span>: Get the min and max across several vectors</span>
<span id="cb100-283"><a href="#cb100-283"></a><span class="ss">- </span>Integer division: <span class="in">`%/%`</span>. Remainder: <span class="in">`%%`</span></span>
<span id="cb100-284"><a href="#cb100-284"></a><span class="ss">    - </span><span class="in">`121 %/% 100 = 1`</span> and <span class="in">`121 %% 100 = 21`</span></span>
<span id="cb100-285"><a href="#cb100-285"></a><span class="ss">- </span><span class="in">`round()`</span>, <span class="in">`floor()`</span>, <span class="in">`ceiling()`</span>: Rounding functions (to a specified number of decimal places, to the largest integer below a number, to the smallest integer above a number)</span>
<span id="cb100-286"><a href="#cb100-286"></a><span class="ss">- </span><span class="in">`cut()`</span>: Cut a numerical vector into categories</span>
<span id="cb100-287"><a href="#cb100-287"></a><span class="ss">- </span><span class="in">`cumsum()`</span>, <span class="in">`cummean()`</span>, <span class="in">`cummin()`</span>, <span class="in">`cummax()`</span>: Cumulative functions</span>
<span id="cb100-288"><a href="#cb100-288"></a><span class="ss">- </span><span class="in">`rank()`</span>: Provide the ranks of the numbers in a vector</span>
<span id="cb100-289"><a href="#cb100-289"></a><span class="ss">- </span><span class="in">`lead(), lag()`</span>: shift a vector by padding with NAs</span>
<span id="cb100-290"><a href="#cb100-290"></a><span class="ss">- </span>Numerical summaries: <span class="in">`mean`</span>, <span class="in">`median`</span>, <span class="in">`min`</span>, <span class="in">`max`</span>, <span class="in">`quantile`</span>, <span class="in">`sd`</span>, <span class="in">`IQR`</span></span>
<span id="cb100-291"><a href="#cb100-291"></a><span class="ss">    - </span>Note that all numerical summary functions have an <span class="in">`na.rm`</span> argument that should be set to <span class="in">`TRUE`</span> if you have missing data.</span>
<span id="cb100-292"><a href="#cb100-292"></a></span>
<span id="cb100-293"><a href="#cb100-293"></a></span>
<span id="cb100-294"><a href="#cb100-294"></a></span>
<span id="cb100-295"><a href="#cb100-295"></a></span>
<span id="cb100-296"><a href="#cb100-296"></a></span>
<span id="cb100-297"><a href="#cb100-297"></a><span class="fu">### Exercises </span></span>
<span id="cb100-298"><a href="#cb100-298"></a></span>
<span id="cb100-299"><a href="#cb100-299"></a>Exercises will be on HW4. </span>
<span id="cb100-300"><a href="#cb100-300"></a></span>
<span id="cb100-301"><a href="#cb100-301"></a>The best way to add these functions and operators to your vocabulary is to need to recall them. Refer to the list of functions above as you try the exercises. </span>
<span id="cb100-302"><a href="#cb100-302"></a></span>
<span id="cb100-303"><a href="#cb100-303"></a>You will need to reference function documentation to look at arguments and look in the Examples section.</span>
<span id="cb100-304"><a href="#cb100-304"></a></span>
<span id="cb100-305"><a href="#cb100-305"></a><span class="fu">## Dates  </span></span>
<span id="cb100-306"><a href="#cb100-306"></a></span>
<span id="cb100-307"><a href="#cb100-307"></a></span>
<span id="cb100-308"><a href="#cb100-308"></a><span class="fu">### Notes </span></span>
<span id="cb100-309"><a href="#cb100-309"></a></span>
<span id="cb100-310"><a href="#cb100-310"></a>The <span class="in">`lubridate`</span> package contains useful functions for working with dates and times. The <span class="in">`lubridate`</span> <span class="co">[</span><span class="ot">function reference</span><span class="co">](https://lubridate.tidyverse.org/reference/index.html)</span> is a useful resource for finding the functions you need. We'll take a brief tour of this reference page.</span>
<span id="cb100-311"><a href="#cb100-311"></a></span>
<span id="cb100-312"><a href="#cb100-312"></a></span>
<span id="cb100-313"><a href="#cb100-313"></a>We'll use the <span class="in">`lakers`</span> dataset in the <span class="in">`lubridate`</span> package to illustrate some examples.</span>
<span id="cb100-314"><a href="#cb100-314"></a></span>
<span id="cb100-315"><a href="#cb100-315"></a><span class="in">```{r load_lakers}</span></span>
<span id="cb100-316"><a href="#cb100-316"></a><span class="in">lakers &lt;- as_tibble(lakers)</span></span>
<span id="cb100-317"><a href="#cb100-317"></a><span class="in">head(lakers)</span></span>
<span id="cb100-318"><a href="#cb100-318"></a><span class="in">```</span></span>
<span id="cb100-319"><a href="#cb100-319"></a></span>
<span id="cb100-320"><a href="#cb100-320"></a></span>
<span id="cb100-321"><a href="#cb100-321"></a>Below we use date-time <span class="co">[</span><span class="ot">parsing functions</span><span class="co">](https://lubridate.tidyverse.org/reference/index.html#date-time-parsing)</span> to represent the <span class="in">`date`</span> and <span class="in">`time`</span> variables with date-time classes:</span>
<span id="cb100-322"><a href="#cb100-322"></a></span>
<span id="cb100-323"><a href="#cb100-323"></a><span class="in">```{r parse_date_time}</span></span>
<span id="cb100-324"><a href="#cb100-324"></a><span class="in">lakers &lt;- lakers |&gt;</span></span>
<span id="cb100-325"><a href="#cb100-325"></a><span class="in">    mutate(</span></span>
<span id="cb100-326"><a href="#cb100-326"></a><span class="in">        date = ymd(date),</span></span>
<span id="cb100-327"><a href="#cb100-327"></a><span class="in">        time = ms(time)</span></span>
<span id="cb100-328"><a href="#cb100-328"></a><span class="in">    )</span></span>
<span id="cb100-329"><a href="#cb100-329"></a><span class="in">```</span></span>
<span id="cb100-330"><a href="#cb100-330"></a></span>
<span id="cb100-331"><a href="#cb100-331"></a></span>
<span id="cb100-332"><a href="#cb100-332"></a>Below we use <span class="co">[</span><span class="ot">extraction functions</span><span class="co">](https://lubridate.tidyverse.org/reference/index.html#setting-getting-and-rounding)</span> to get components of the date-time objects:</span>
<span id="cb100-333"><a href="#cb100-333"></a></span>
<span id="cb100-334"><a href="#cb100-334"></a><span class="in">```{r lakers_extract}</span></span>
<span id="cb100-335"><a href="#cb100-335"></a><span class="in">lakers_clean &lt;- lakers |&gt;</span></span>
<span id="cb100-336"><a href="#cb100-336"></a><span class="in">    mutate(</span></span>
<span id="cb100-337"><a href="#cb100-337"></a><span class="in">        year = year(date),</span></span>
<span id="cb100-338"><a href="#cb100-338"></a><span class="in">        month = month(date),</span></span>
<span id="cb100-339"><a href="#cb100-339"></a><span class="in">        day = day(date),</span></span>
<span id="cb100-340"><a href="#cb100-340"></a><span class="in">        day_of_week = wday(date, label = TRUE),</span></span>
<span id="cb100-341"><a href="#cb100-341"></a><span class="in">        minute = minute(time),</span></span>
<span id="cb100-342"><a href="#cb100-342"></a><span class="in">        second = second(time)</span></span>
<span id="cb100-343"><a href="#cb100-343"></a><span class="in">    )</span></span>
<span id="cb100-344"><a href="#cb100-344"></a><span class="in">lakers_clean |&gt; select(year:second)</span></span>
<span id="cb100-345"><a href="#cb100-345"></a></span>
<span id="cb100-346"><a href="#cb100-346"></a><span class="in">lakers_clean &lt;- lakers_clean |&gt;</span></span>
<span id="cb100-347"><a href="#cb100-347"></a><span class="in">    group_by(date, opponent, period) |&gt;</span></span>
<span id="cb100-348"><a href="#cb100-348"></a><span class="in">    arrange(date, opponent, period, desc(time)) |&gt;</span></span>
<span id="cb100-349"><a href="#cb100-349"></a><span class="in">    mutate(</span></span>
<span id="cb100-350"><a href="#cb100-350"></a><span class="in">        diff_btw_plays_sec = as.numeric(time - lag(time, 1))</span></span>
<span id="cb100-351"><a href="#cb100-351"></a><span class="in">    )</span></span>
<span id="cb100-352"><a href="#cb100-352"></a><span class="in">lakers_clean |&gt; select(date, opponent, time, period, diff_btw_plays_sec)</span></span>
<span id="cb100-353"><a href="#cb100-353"></a><span class="in">```</span></span>
<span id="cb100-354"><a href="#cb100-354"></a></span>
<span id="cb100-355"><a href="#cb100-355"></a><span class="fu">### Exercises  </span></span>
<span id="cb100-356"><a href="#cb100-356"></a></span>
<span id="cb100-357"><a href="#cb100-357"></a>Exercises will be on HW4. </span>
<span id="cb100-358"><a href="#cb100-358"></a></span>
<span id="cb100-359"><a href="#cb100-359"></a></span>
<span id="cb100-360"><a href="#cb100-360"></a><span class="fu">## Factors </span></span>
<span id="cb100-361"><a href="#cb100-361"></a></span>
<span id="cb100-362"><a href="#cb100-362"></a><span class="fu">### Notes </span></span>
<span id="cb100-363"><a href="#cb100-363"></a></span>
<span id="cb100-364"><a href="#cb100-364"></a>**Creating factors**</span>
<span id="cb100-365"><a href="#cb100-365"></a></span>
<span id="cb100-366"><a href="#cb100-366"></a>In R, factors are made up of two components: the **actual values** of the data and the possible **levels** within the factor. Creating a factor requires supplying both pieces of information.</span>
<span id="cb100-367"><a href="#cb100-367"></a></span>
<span id="cb100-368"><a href="#cb100-368"></a><span class="in">```{r months_char_vec}</span></span>
<span id="cb100-369"><a href="#cb100-369"></a><span class="in">months &lt;- c("Mar", "Dec", "Jan",  "Apr", "Jul")</span></span>
<span id="cb100-370"><a href="#cb100-370"></a><span class="in">```</span></span>
<span id="cb100-371"><a href="#cb100-371"></a></span>
<span id="cb100-372"><a href="#cb100-372"></a></span>
<span id="cb100-373"><a href="#cb100-373"></a>However, if we were to sort this vector, R would sort this vector alphabetically.</span>
<span id="cb100-374"><a href="#cb100-374"></a></span>
<span id="cb100-375"><a href="#cb100-375"></a><span class="in">```{r sort_months_abs}</span></span>
<span id="cb100-376"><a href="#cb100-376"></a><span class="in"># alphabetical sort</span></span>
<span id="cb100-377"><a href="#cb100-377"></a><span class="in">sort(months)</span></span>
<span id="cb100-378"><a href="#cb100-378"></a><span class="in">```</span></span>
<span id="cb100-379"><a href="#cb100-379"></a></span>
<span id="cb100-380"><a href="#cb100-380"></a></span>
<span id="cb100-381"><a href="#cb100-381"></a>We can fix this sorting by creating a factor version of <span class="in">`months`</span>. The <span class="in">`levels`</span> argument is a character vector that specifies the unique values that the factor can take. The order of the values in <span class="in">`levels`</span> defines the sorting of the factor.</span>
<span id="cb100-382"><a href="#cb100-382"></a></span>
<span id="cb100-383"><a href="#cb100-383"></a><span class="in">```{r create_months_fct}</span></span>
<span id="cb100-384"><a href="#cb100-384"></a><span class="in">months_fct &lt;- factor(months, levels = month.abb) # month.abb is a built-in variable</span></span>
<span id="cb100-385"><a href="#cb100-385"></a><span class="in">months_fct</span></span>
<span id="cb100-386"><a href="#cb100-386"></a><span class="in">sort(months_fct)</span></span>
<span id="cb100-387"><a href="#cb100-387"></a><span class="in">```</span></span>
<span id="cb100-388"><a href="#cb100-388"></a></span>
<span id="cb100-389"><a href="#cb100-389"></a></span>
<span id="cb100-390"><a href="#cb100-390"></a>What if we try to create a factor with values that aren't in the levels? (e.g., a typo in a month name)</span>
<span id="cb100-391"><a href="#cb100-391"></a></span>
<span id="cb100-392"><a href="#cb100-392"></a><span class="in">```{r months_typo}</span></span>
<span id="cb100-393"><a href="#cb100-393"></a><span class="in">months2 &lt;- c("Jna", "Mar")</span></span>
<span id="cb100-394"><a href="#cb100-394"></a><span class="in">factor(months2, levels = month.abb)</span></span>
<span id="cb100-395"><a href="#cb100-395"></a><span class="in">```</span></span>
<span id="cb100-396"><a href="#cb100-396"></a></span>
<span id="cb100-397"><a href="#cb100-397"></a></span>
<span id="cb100-398"><a href="#cb100-398"></a>Because the <span class="in">`NA`</span> is introduced silently (without any error or warnings), this can be dangerous. It might be better to use the <span class="in">`fct()`</span> function in the <span class="in">`forcats`</span> package instead:</span>
<span id="cb100-399"><a href="#cb100-399"></a></span>
<span id="cb100-400"><a href="#cb100-400"></a><span class="in">```{r fct_forcats}</span></span>
<span id="cb100-401"><a href="#cb100-401"></a><span class="in">#| error: true</span></span>
<span id="cb100-402"><a href="#cb100-402"></a></span>
<span id="cb100-403"><a href="#cb100-403"></a><span class="in">fct(months2, levels = month.abb)</span></span>
<span id="cb100-404"><a href="#cb100-404"></a><span class="in">```</span></span>
<span id="cb100-405"><a href="#cb100-405"></a></span>
<span id="cb100-406"><a href="#cb100-406"></a></span>
<span id="cb100-407"><a href="#cb100-407"></a></span>
<span id="cb100-408"><a href="#cb100-408"></a>**Reordering factors**</span>
<span id="cb100-409"><a href="#cb100-409"></a></span>
<span id="cb100-410"><a href="#cb100-410"></a></span>
<span id="cb100-411"><a href="#cb100-411"></a>We'll use a subset of the General Social Survey (GSS) dataset available in the <span class="in">`forcats`</span> pacakges.</span>
<span id="cb100-412"><a href="#cb100-412"></a></span>
<span id="cb100-413"><a href="#cb100-413"></a><span class="in">```{r load_gss}</span></span>
<span id="cb100-414"><a href="#cb100-414"></a><span class="in">data(gss_cat)</span></span>
<span id="cb100-415"><a href="#cb100-415"></a><span class="in">head(gss_cat)</span></span>
<span id="cb100-416"><a href="#cb100-416"></a><span class="in">```</span></span>
<span id="cb100-417"><a href="#cb100-417"></a></span>
<span id="cb100-418"><a href="#cb100-418"></a></span>
<span id="cb100-419"><a href="#cb100-419"></a>Reordering the levels of a factor can be useful in plotting when categories would benefit from being sorted in a particular way:</span>
<span id="cb100-420"><a href="#cb100-420"></a></span>
<span id="cb100-421"><a href="#cb100-421"></a><span class="in">```{r reorder_factors_motivation}</span></span>
<span id="cb100-422"><a href="#cb100-422"></a><span class="in">relig_summary &lt;- gss_cat |&gt;</span></span>
<span id="cb100-423"><a href="#cb100-423"></a><span class="in">    group_by(relig) |&gt;</span></span>
<span id="cb100-424"><a href="#cb100-424"></a><span class="in">    summarize(</span></span>
<span id="cb100-425"><a href="#cb100-425"></a><span class="in">        tvhours = mean(tvhours, na.rm = TRUE),</span></span>
<span id="cb100-426"><a href="#cb100-426"></a><span class="in">        n = n()</span></span>
<span id="cb100-427"><a href="#cb100-427"></a><span class="in">    )</span></span>
<span id="cb100-428"><a href="#cb100-428"></a></span>
<span id="cb100-429"><a href="#cb100-429"></a><span class="in">ggplot(relig_summary, aes(x = tvhours, y = relig)) + </span></span>
<span id="cb100-430"><a href="#cb100-430"></a><span class="in">    geom_point() +</span></span>
<span id="cb100-431"><a href="#cb100-431"></a><span class="in">    theme_classic()</span></span>
<span id="cb100-432"><a href="#cb100-432"></a><span class="in">```</span></span>
<span id="cb100-433"><a href="#cb100-433"></a></span>
<span id="cb100-434"><a href="#cb100-434"></a></span>
<span id="cb100-435"><a href="#cb100-435"></a>We can use <span class="in">`fct_reorder()`</span> in <span class="in">`forcats`</span>.</span>
<span id="cb100-436"><a href="#cb100-436"></a></span>
<span id="cb100-437"><a href="#cb100-437"></a><span class="ss">- </span>The first argument is the factor that you want to reorder the levels of</span>
<span id="cb100-438"><a href="#cb100-438"></a><span class="ss">- </span>The second argument determines how the factor is sorted (analogous to what you put inside <span class="in">`arrange()`</span> when sorting the rows of a data frame.)</span>
<span id="cb100-439"><a href="#cb100-439"></a></span>
<span id="cb100-440"><a href="#cb100-440"></a><span class="in">```{r fct_reorder}</span></span>
<span id="cb100-441"><a href="#cb100-441"></a><span class="in">ggplot(relig_summary, aes(x = tvhours, y = fct_reorder(relig, tvhours))) +</span></span>
<span id="cb100-442"><a href="#cb100-442"></a><span class="in">    geom_point() +</span></span>
<span id="cb100-443"><a href="#cb100-443"></a><span class="in">    theme_classic()</span></span>
<span id="cb100-444"><a href="#cb100-444"></a><span class="in">```</span></span>
<span id="cb100-445"><a href="#cb100-445"></a></span>
<span id="cb100-446"><a href="#cb100-446"></a></span>
<span id="cb100-447"><a href="#cb100-447"></a>For bar plots, we can use <span class="in">`fct_infreq()`</span> to reorder levels from most to least common. This can be combined with <span class="in">`fct_rev()`</span> to reverse the order (least to most common):</span>
<span id="cb100-448"><a href="#cb100-448"></a></span>
<span id="cb100-449"><a href="#cb100-449"></a><span class="in">```{r fct_infreq_rev}</span></span>
<span id="cb100-450"><a href="#cb100-450"></a><span class="in">gss_cat |&gt;</span></span>
<span id="cb100-451"><a href="#cb100-451"></a><span class="in">    ggplot(aes(x = marital)) +</span></span>
<span id="cb100-452"><a href="#cb100-452"></a><span class="in">    geom_bar() +</span></span>
<span id="cb100-453"><a href="#cb100-453"></a><span class="in">    theme_classic()</span></span>
<span id="cb100-454"><a href="#cb100-454"></a></span>
<span id="cb100-455"><a href="#cb100-455"></a><span class="in">gss_cat |&gt;</span></span>
<span id="cb100-456"><a href="#cb100-456"></a><span class="in">    mutate(marital = marital |&gt; fct_infreq() |&gt; fct_rev()) |&gt;</span></span>
<span id="cb100-457"><a href="#cb100-457"></a><span class="in">    ggplot(aes(x = marital)) +</span></span>
<span id="cb100-458"><a href="#cb100-458"></a><span class="in">    geom_bar() +</span></span>
<span id="cb100-459"><a href="#cb100-459"></a><span class="in">    theme_classic()</span></span>
<span id="cb100-460"><a href="#cb100-460"></a><span class="in">```</span></span>
<span id="cb100-461"><a href="#cb100-461"></a></span>
<span id="cb100-462"><a href="#cb100-462"></a></span>
<span id="cb100-463"><a href="#cb100-463"></a>**Modifying factor levels**</span>
<span id="cb100-464"><a href="#cb100-464"></a></span>
<span id="cb100-465"><a href="#cb100-465"></a>We talked about reordering the levels of a factor--what about changing the values of the levels themselves?</span>
<span id="cb100-466"><a href="#cb100-466"></a></span>
<span id="cb100-467"><a href="#cb100-467"></a>For example, the names of the political parties in the GSS could use elaboration ("str" isn't a great label for "strong") and clean up:</span>
<span id="cb100-468"><a href="#cb100-468"></a></span>
<span id="cb100-469"><a href="#cb100-469"></a><span class="in">```{r gss_messy_party}</span></span>
<span id="cb100-470"><a href="#cb100-470"></a><span class="in">gss_cat |&gt; count(partyid)</span></span>
<span id="cb100-471"><a href="#cb100-471"></a><span class="in">```</span></span>
<span id="cb100-472"><a href="#cb100-472"></a></span>
<span id="cb100-473"><a href="#cb100-473"></a></span>
<span id="cb100-474"><a href="#cb100-474"></a>We can use <span class="in">`fct_recode()`</span> on <span class="in">`partyid`</span> with the new level names going on the left and the old levels on the right. Any levels that aren't mentioned explicitly (i.e., "Don't know" and "Other party") will be left as is:</span>
<span id="cb100-475"><a href="#cb100-475"></a></span>
<span id="cb100-476"><a href="#cb100-476"></a><span class="in">```{r fct_recode}</span></span>
<span id="cb100-477"><a href="#cb100-477"></a><span class="in">gss_cat |&gt;</span></span>
<span id="cb100-478"><a href="#cb100-478"></a><span class="in">    mutate(</span></span>
<span id="cb100-479"><a href="#cb100-479"></a><span class="in">        partyid = fct_recode(partyid,</span></span>
<span id="cb100-480"><a href="#cb100-480"></a><span class="in">            "Republican, strong"    = "Strong republican",</span></span>
<span id="cb100-481"><a href="#cb100-481"></a><span class="in">            "Republican, weak"      = "Not str republican",</span></span>
<span id="cb100-482"><a href="#cb100-482"></a><span class="in">            "Independent, near rep" = "Ind,near rep",</span></span>
<span id="cb100-483"><a href="#cb100-483"></a><span class="in">            "Independent, near dem" = "Ind,near dem",</span></span>
<span id="cb100-484"><a href="#cb100-484"></a><span class="in">            "Democrat, weak"        = "Not str democrat",</span></span>
<span id="cb100-485"><a href="#cb100-485"></a><span class="in">            "Democrat, strong"      = "Strong democrat"</span></span>
<span id="cb100-486"><a href="#cb100-486"></a><span class="in">        )</span></span>
<span id="cb100-487"><a href="#cb100-487"></a><span class="in">    ) |&gt;</span></span>
<span id="cb100-488"><a href="#cb100-488"></a><span class="in">    count(partyid)</span></span>
<span id="cb100-489"><a href="#cb100-489"></a><span class="in">```</span></span>
<span id="cb100-490"><a href="#cb100-490"></a></span>
<span id="cb100-491"><a href="#cb100-491"></a></span>
<span id="cb100-492"><a href="#cb100-492"></a>To combine groups, we can assign multiple old levels to the same new level ("Other" maps to "No answer", "Don't know", and "Other party"):</span>
<span id="cb100-493"><a href="#cb100-493"></a></span>
<span id="cb100-494"><a href="#cb100-494"></a><span class="in">```{r fct_recode2}</span></span>
<span id="cb100-495"><a href="#cb100-495"></a><span class="in">gss_cat |&gt;</span></span>
<span id="cb100-496"><a href="#cb100-496"></a><span class="in">    mutate(</span></span>
<span id="cb100-497"><a href="#cb100-497"></a><span class="in">        partyid = fct_recode(partyid,</span></span>
<span id="cb100-498"><a href="#cb100-498"></a><span class="in">            "Republican, strong"    = "Strong republican",</span></span>
<span id="cb100-499"><a href="#cb100-499"></a><span class="in">            "Republican, weak"      = "Not str republican",</span></span>
<span id="cb100-500"><a href="#cb100-500"></a><span class="in">            "Independent, near rep" = "Ind,near rep",</span></span>
<span id="cb100-501"><a href="#cb100-501"></a><span class="in">            "Independent, near dem" = "Ind,near dem",</span></span>
<span id="cb100-502"><a href="#cb100-502"></a><span class="in">            "Democrat, weak"        = "Not str democrat",</span></span>
<span id="cb100-503"><a href="#cb100-503"></a><span class="in">            "Democrat, strong"      = "Strong democrat",</span></span>
<span id="cb100-504"><a href="#cb100-504"></a><span class="in">            "Other"                 = "No answer",</span></span>
<span id="cb100-505"><a href="#cb100-505"></a><span class="in">            "Other"                 = "Don't know",</span></span>
<span id="cb100-506"><a href="#cb100-506"></a><span class="in">            "Other"                 = "Other party"</span></span>
<span id="cb100-507"><a href="#cb100-507"></a><span class="in">        )</span></span>
<span id="cb100-508"><a href="#cb100-508"></a><span class="in">    )</span></span>
<span id="cb100-509"><a href="#cb100-509"></a><span class="in">```</span></span>
<span id="cb100-510"><a href="#cb100-510"></a></span>
<span id="cb100-511"><a href="#cb100-511"></a></span>
<span id="cb100-512"><a href="#cb100-512"></a>We can use <span class="in">`fct_collapse()`</span> to collapse many levels:</span>
<span id="cb100-513"><a href="#cb100-513"></a></span>
<span id="cb100-514"><a href="#cb100-514"></a><span class="in">```{r fct_collapse}</span></span>
<span id="cb100-515"><a href="#cb100-515"></a><span class="in">gss_cat |&gt;</span></span>
<span id="cb100-516"><a href="#cb100-516"></a><span class="in">    mutate(</span></span>
<span id="cb100-517"><a href="#cb100-517"></a><span class="in">        partyid = fct_collapse(partyid,</span></span>
<span id="cb100-518"><a href="#cb100-518"></a><span class="in">            "Other" = c("No answer", "Don't know", "Other party"),</span></span>
<span id="cb100-519"><a href="#cb100-519"></a><span class="in">            "Republican" = c("Strong republican", "Not str republican"),</span></span>
<span id="cb100-520"><a href="#cb100-520"></a><span class="in">            "Independent" = c("Ind,near rep", "Independent", "Ind,near dem"),</span></span>
<span id="cb100-521"><a href="#cb100-521"></a><span class="in">            "Democrat" = c("Not str democrat", "Strong democrat")</span></span>
<span id="cb100-522"><a href="#cb100-522"></a><span class="in">        )</span></span>
<span id="cb100-523"><a href="#cb100-523"></a><span class="in">    ) |&gt;</span></span>
<span id="cb100-524"><a href="#cb100-524"></a><span class="in">    count(partyid)</span></span>
<span id="cb100-525"><a href="#cb100-525"></a><span class="in">```</span></span>
<span id="cb100-526"><a href="#cb100-526"></a></span>
<span id="cb100-527"><a href="#cb100-527"></a></span>
<span id="cb100-528"><a href="#cb100-528"></a></span>
<span id="cb100-529"><a href="#cb100-529"></a><span class="fu">### Exercises </span></span>
<span id="cb100-530"><a href="#cb100-530"></a></span>
<span id="cb100-531"><a href="#cb100-531"></a></span>
<span id="cb100-532"><a href="#cb100-532"></a><span class="ss">1. </span>Create a factor version of the following data with the levels in a sensible order.</span>
<span id="cb100-533"><a href="#cb100-533"></a></span>
<span id="cb100-536"><a href="#cb100-536"></a><span class="in">```{r}</span></span>
<span id="cb100-537"><a href="#cb100-537"></a>ratings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"High"</span>, <span class="st">"Medium"</span>, <span class="st">"Low"</span>)</span>
<span id="cb100-538"><a href="#cb100-538"></a><span class="in">```</span></span>
<span id="cb100-539"><a href="#cb100-539"></a></span>
<span id="cb100-540"><a href="#cb100-540"></a></span>
<span id="cb100-541"><a href="#cb100-541"></a>More exercises will be on HW4. </span>
<span id="cb100-542"><a href="#cb100-542"></a></span>
<span id="cb100-543"><a href="#cb100-543"></a><span class="fu">## Done!</span></span>
<span id="cb100-544"><a href="#cb100-544"></a></span>
<span id="cb100-545"><a href="#cb100-545"></a><span class="ss">- </span>Check the ICA Instructions for how to (a) push your code to GitHub and (b) update your portfolio website</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


<script src="../../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>